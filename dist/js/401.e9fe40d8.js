"use strict";(self["webpackChunkplatform_monitors4"]=self["webpackChunkplatform_monitors4"]||[]).push([[401],{1329:function(e,t,a){a.d(t,{O1:function(){return i},Ow:function(){return s},el:function(){return r},ws:function(){return n}});var l=a(1076);const o="http://67.205.164.216:3000/api/v1";function n(e,t){return l.Z.post(`${o}/allGroupsUsers`,{cod_cuenta:e,cod_cliente:t})}function i(e){return l.Z.post(`${o}/createGroupUsers`,e)}function s(e){return l.Z.post(`${o}/deleteGroupUsers`,e)}function r(e){return l.Z.post(`${o}/editGroupsUsers`,e)}},6365:function(e,t,a){a.d(t,{$:function(){return n},K:function(){return i}});var l=a(1076);const o="http://67.205.164.216:3000/api/v1";function n(e){return l.Z.post(`${o}/listAccounts`,{cod_cuenta:e})}function i(e,t){return l.Z.post(`${o}/listClients`,{cod_cuenta:e,empresa:t})}},1401:function(e,t,a){a.r(t),a.d(t,{default:function(){return se}});var l=a(3396),o=a(7139),n=a(9242),i=a(7771),s=a(4108),r=a(3446),u=a(6191),c=a(4580),d=a(3289),m=a(678);const p={class:"flex justify-between w-full"},v=(0,l._)("div",null,[(0,l._)("h1",{class:"font-bold text-xl title_poppins pb-5"},"Grupo de usuarios")],-1),f={class:"w-full rounded-lg bg-white grid grid-cols-2 gap-3 p-4 shadow-md"},w={class:"p-3 border-2 border-blue-400 rounded-lg mt-3 min-h-[5rem]"},g={class:"mt-3"},b={class:"flex gap-2"},_={class:"p-3 rounded-lg border min-h-[4rem]"};function k(e,t,a,k,I,h){const A=(0,l.up)("CreateGroupVue"),W=(0,l.up)("EditGroupUsersVue");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("div",null,[(0,l._)("div",p,[v,(0,l.Wm)(A,{onCreateItem:k.onCreateItem},null,8,["onCreateItem"])]),(0,l._)("div",f,[(0,l._)("div",null,[(0,l.Wm)(i.w,{color:"#3b82f6",theme:"dark",icon:"mdi-account-details",density:"compact",border:""},{default:(0,l.w5)((()=>[(0,l.Uk)(" Lista de usuarios ")])),_:1}),(0,l._)("div",w,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(k.dataUsers,(e=>((0,l.wg)(),(0,l.j4)(i.w,{color:"#bfdbfe",theme:"dark",icon:"mdi-account",density:"compact",class:"my-1",key:e.usuario},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(e.usuario),1)])),_:2},1024)))),128))])]),(0,l._)("div",null,[(0,l.Wm)(i.w,{color:"#3b82f6",theme:"dark",icon:"mdi-account-group",density:"compact",border:""},{default:(0,l.w5)((()=>[(0,l.Uk)(" Grupos de usuarios ")])),_:1}),(0,l._)("div",g,[(0,l.Wm)(s.Vc,{multiple:""},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(k.dataGroupUsers,(e=>((0,l.wg)(),(0,l.j4)(r.M,{key:e.codigo},{default:(0,l.w5)((()=>[(0,l.Wm)(u.V,{color:"blue-grey-lighten-5"},{default:(0,l.w5)((()=>[(0,l._)("div",b,[(0,l._)("span",{onClick:t[0]||(t[0]=(0,n.iM)((()=>{}),["stop"]))},[(0,l.Wm)(d.t,{color:"green",size:"small",onClick:t=>k.editGroup(e)},{default:(0,l.w5)((()=>[(0,l.Uk)("mdi-square-edit-outline")])),_:2},1032,["onClick"]),(0,l.Wm)(m.N,{activator:"parent",location:"top"},{default:(0,l.w5)((()=>[(0,l.Uk)("Editar")])),_:1})]),(0,l._)("span",{onClick:t[1]||(t[1]=(0,n.iM)((()=>{}),["stop"]))},[(0,l.Wm)(d.t,{color:"red",size:"small",onClick:t=>k.deleteGroup(e.codigo)},{default:(0,l.w5)((()=>[(0,l.Uk)("mdi-delete-empty")])),_:2},1032,["onClick"]),(0,l.Wm)(m.N,{activator:"parent",location:"top"},{default:(0,l.w5)((()=>[(0,l.Uk)("Eliminar")])),_:1})]),(0,l._)("span",null,(0,o.zw)(e.nombre),1)])])),_:2},1024),(0,l.Wm)(c.H,null,{default:(0,l.w5)((()=>[(0,l._)("div",_,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.usuarios,(e=>((0,l.wg)(),(0,l.j4)(i.w,{color:"#bfdbfe",theme:"dark",icon:"mdi-account",density:"compact",key:e,class:"my-1"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(e),1)])),_:2},1024)))),128))])])),_:2},1024)])),_:2},1024)))),128))])),_:1})])])])]),(0,l.Wm)(W,{itemEdit:k.editItem,openModal:k.editDialog,onCancelItem:t[2]||(t[2]=e=>k.editDialog=!1),onEditItem:k.onUpdateItem},null,8,["itemEdit","openModal","onEditItem"])],64)}var I=a(6365),h=a(1329),A=a(7312),W=a(5039),S=a(1888),U=a(1334),C=a(3601),y=a(8521),G=a(9234),H=a(165),Z=a(1328);const x=(0,l._)("span",{class:"px-4 w-full text-center text-blue-400 font-bold title_views"},"Crear grupo de usuarios",-1),M={class:"w-full block lg:flex gap-1 items-center"},V={class:"w-full"},T={class:"flex justify-center lg:block"},O={class:"my-1"},E={class:"my-1"},L={class:"w-full"};function N(e,t,a,o,i,s){const r=(0,l.up)("SelectItemsAndMoveVue");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)(A.T,{size:"small",color:"blue",onClick:t[0]||(t[0]=e=>o.dialog=!0)},{default:(0,l.w5)((()=>[(0,l.Wm)(d.t,{icon:"mdi-plus"}),(0,l.Uk)(" Crear Nuevo")])),_:1}),(0,l.Wm)(C.B,{modelValue:o.dialog,"onUpdate:modelValue":t[2]||(t[2]=e=>o.dialog=e),width:"600","onClick:outside":o.cancelItem},{default:(0,l.w5)((()=>[(0,l.Wm)(W._,null,{default:(0,l.w5)((()=>[(0,l.Wm)(Z.i,null,{default:(0,l.w5)((()=>[x])),_:1}),(0,l.Wm)(S.Z,null,{default:(0,l.w5)((()=>[(0,l.Wm)(y.D,{cols:"12"},{default:(0,l.w5)((()=>[(0,l.Wm)(H.h,{variant:"outlined",label:"Nombre","prepend-inner-icon":"mdi-form-textbox",color:"indigo",modelValue:o.name,"onUpdate:modelValue":t[1]||(t[1]=e=>o.name=e)},null,8,["modelValue"]),(0,l._)("div",M,[(0,l._)("div",V,[(0,l.Wm)(A.T,{density:"compact",class:"w-full mb-2 text-none",color:"blue-lighten-1",variant:"tonal"},{default:(0,l.w5)((()=>[(0,l.Uk)(" USUARIOS DISPONIBLES ")])),_:1}),(0,l.Wm)(r,{listGroups:o.itemsAvailable,onListSeleccionados:o.emitSelectedItemsAvailable,nameGrupo:"Obras libres"},null,8,["listGroups","onListSeleccionados"])]),(0,l._)("div",T,[(0,l._)("div",O,[(0,l.Wm)(A.T,{icon:o.isMobile?"mdi-arrow-down":"mdi-arrow-right",variant:"tonal",size:"small",color:"indigo",onClick:(0,n.iM)(o.moveSelectedItemsToAssigned,["prevent"])},null,8,["icon","onClick"]),(0,l.Wm)(m.N,{activator:"parent",location:"top"},{default:(0,l.w5)((()=>[(0,l.Uk)("Agregar")])),_:1})]),(0,l._)("div",E,[(0,l.Wm)(A.T,{icon:o.isMobile?"mdi-arrow-up":"mdi-arrow-left",variant:"tonal",size:"small",color:"indigo",onClick:(0,n.iM)(o.moveSelectedItemsToAvailable,["prevent"])},null,8,["icon","onClick"]),(0,l.Wm)(m.N,{activator:"parent",location:"top"},{default:(0,l.w5)((()=>[(0,l.Uk)("Quitar")])),_:1})])]),(0,l._)("div",L,[(0,l.Wm)(A.T,{density:"compact",class:"w-full mb-2 text-none",color:"blue-lighten-1",variant:"tonal"},{default:(0,l.w5)((()=>[(0,l.Uk)(" USUARIOS ASIGNADOS ")])),_:1}),(0,l.Wm)(r,{listGroups:o.itemsAssigned,onListSeleccionados:o.emitSelectedItemsAssigned,nameGrupo:"Obras asignadas"},null,8,["listGroups","onListSeleccionados"])])])])),_:1})])),_:1}),(0,l.Wm)(U.h,null,{default:(0,l.w5)((()=>[(0,l.Wm)(G.C),(0,l.Wm)(A.T,{color:"blue-grey-lighten-2",variant:"tonal",onClick:o.cancelItem},{default:(0,l.w5)((()=>[(0,l.Uk)(" Cancelar ")])),_:1},8,["onClick"]),(0,l.Wm)(A.T,{color:"blue-lighten-1",variant:"tonal",onClick:o.createItem},{default:(0,l.w5)((()=>[(0,l.Uk)(" Aceptar ")])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue","onClick:outside"])],64)}a(560);var D=a(4239),z=a(4870),j=a(8609),Y={components:{SelectItemsAndMoveVue:j.Z},emits:["create-item"],setup(e,{emit:t}){const a=(0,z.iH)([]),o=(0,z.iH)(!1),n=(0,z.iH)(""),i=(0,z.iH)([]),s=(0,z.iH)([]),r=(0,z.iH)([]),u=(0,z.iH)([]),c=(0,z.iH)(!1);(0,l.YP)((()=>o.value),(e=>{1==e&&(d(),window.addEventListener("resize",d),(0,I.K)(D.Z.state.codcuenta,D.Z.state.empresa).then((e=>{a.value=e.data.data?e.data.data.filter((e=>"Administrador"!=e.rol)):[],u.value=a.value.map((e=>({name:e.usuario})))})))}));const d=()=>{c.value=window.innerWidth<=500},m=()=>{t("create-item",{cod_cuenta:D.Z.state.codcuenta,cod_cliente:D.Z.state.codcliente,nombre:n.value,usuarios:r.value.map((e=>e.name))}),p()},p=()=>{n.value="",r.value=[],o.value=!1},v=e=>{s.value=e},f=e=>{i.value=e},w=()=>{if(0!=i.value.length){const e=i.value.map((e=>({name:e})));r.value.push(...e),u.value=u.value.filter((t=>-1===e.findIndex((e=>e.name===t.name))))}},g=()=>{if(0!=s.value.length){const e=s.value.map((e=>({name:e})));u.value.push(...e),r.value=r.value.filter((t=>-1===e.findIndex((e=>e.name===t.name))))}};return{dialog:o,name:n,isMobile:c,createItem:m,cancelItem:p,selectedItemsAvailable:i,selectedItemsAssigned:s,itemsAssigned:r,itemsAvailable:u,emitSelectedItemsAssigned:v,emitSelectedItemsAvailable:f,moveSelectedItemsToAssigned:w,moveSelectedItemsToAvailable:g}}},K=a(89);const P=(0,K.Z)(Y,[["render",N]]);var $=P;const B=(0,l._)("span",{class:"px-4 w-full text-center text-blue-400 font-bold title_views"},"Editar grupo de usuarios",-1),R={class:"w-full block lg:flex gap-1 items-center"},Q={class:"w-full"},q={class:"flex justify-center lg:block"},F={class:"my-1"},J={class:"my-1"},X={class:"w-full"};function ee(e,t,a,o,i,s){const r=(0,l.up)("SelectItemsAndMoveVue");return(0,l.wg)(),(0,l.j4)(C.B,{modelValue:o.dialog,"onUpdate:modelValue":t[1]||(t[1]=e=>o.dialog=e),width:"600","onClick:outside":o.cancelItem},{default:(0,l.w5)((()=>[(0,l.Wm)(W._,null,{default:(0,l.w5)((()=>[(0,l.Wm)(Z.i,null,{default:(0,l.w5)((()=>[B])),_:1}),(0,l.Wm)(S.Z,null,{default:(0,l.w5)((()=>[(0,l.Wm)(y.D,{cols:"12"},{default:(0,l.w5)((()=>[(0,l.Wm)(H.h,{variant:"outlined",label:"Nombre","prepend-inner-icon":"mdi-form-textbox",color:"indigo",modelValue:o.name,"onUpdate:modelValue":t[0]||(t[0]=e=>o.name=e)},null,8,["modelValue"]),(0,l._)("div",R,[(0,l._)("div",Q,[(0,l.Wm)(A.T,{density:"compact",class:"w-full mb-2 text-none",color:"blue-lighten-1",variant:"tonal"},{default:(0,l.w5)((()=>[(0,l.Uk)(" USUARIOS DISPONIBLES ")])),_:1}),(0,l.Wm)(r,{listGroups:o.itemsAvailable,onListSeleccionados:o.emitSelectedItemsAvailable,nameGrupo:"Obras libres"},null,8,["listGroups","onListSeleccionados"])]),(0,l._)("div",q,[(0,l._)("div",F,[(0,l.Wm)(A.T,{icon:o.isMobile?"mdi-arrow-down":"mdi-arrow-right",variant:"tonal",size:"small",color:"indigo",onClick:(0,n.iM)(o.moveSelectedItemsToAssigned,["prevent"])},null,8,["icon","onClick"]),(0,l.Wm)(m.N,{activator:"parent",location:"top"},{default:(0,l.w5)((()=>[(0,l.Uk)("Agregar")])),_:1})]),(0,l._)("div",J,[(0,l.Wm)(A.T,{icon:o.isMobile?"mdi-arrow-up":"mdi-arrow-left",variant:"tonal",size:"small",color:"indigo",onClick:(0,n.iM)(o.moveSelectedItemsToAvailable,["prevent"])},null,8,["icon","onClick"]),(0,l.Wm)(m.N,{activator:"parent",location:"top"},{default:(0,l.w5)((()=>[(0,l.Uk)("Quitar")])),_:1})])]),(0,l._)("div",X,[(0,l.Wm)(A.T,{density:"compact",class:"w-full mb-2 text-none",color:"blue-lighten-1",variant:"tonal"},{default:(0,l.w5)((()=>[(0,l.Uk)(" USUARIOS ASIGNADOS ")])),_:1}),(0,l.Wm)(r,{listGroups:o.itemsAssigned,onListSeleccionados:o.emitSelectedItemsAssigned,nameGrupo:"Obras asignadas"},null,8,["listGroups","onListSeleccionados"])])])])),_:1})])),_:1}),(0,l.Wm)(U.h,null,{default:(0,l.w5)((()=>[(0,l.Wm)(G.C),(0,l.Wm)(A.T,{color:"blue-grey-lighten-2",variant:"tonal",onClick:o.cancelItem},{default:(0,l.w5)((()=>[(0,l.Uk)(" Cancelar ")])),_:1},8,["onClick"]),(0,l.Wm)(A.T,{color:"blue-lighten-1",variant:"tonal",onClick:o.editItem},{default:(0,l.w5)((()=>[(0,l.Uk)(" Aceptar ")])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue","onClick:outside"])}var te={components:{SelectItemsAndMoveVue:j.Z},props:{itemEdit:Object,openModal:Boolean},emits:["edit-item","cancel-item"],setup(e,{emit:t}){const a=(0,z.iH)([]),o=(0,z.iH)(!1),n=(0,z.iH)(""),i=(0,z.iH)(""),s=(0,z.iH)([]),r=(0,z.iH)([]),u=(0,z.iH)([]),c=(0,z.iH)([]),d=(0,z.iH)(!1);(0,l.YP)((()=>e.openModal),(e=>{o.value=e})),(0,l.YP)((()=>o.value),(e=>{1==e&&(m(),window.addEventListener("resize",m))})),(0,l.YP)((()=>e.itemEdit),(e=>{0!==Object.keys(e).length&&(i.value=e.codigo,n.value=e.nombre,u.value=e.usuarios.map((e=>({name:e}))),(0,I.K)(D.Z.state.codcuenta,D.Z.state.empresa).then((t=>{a.value=t.data.data?t.data.data:[],c.value=a.value.filter((t=>!e.usuarios.includes(t.usuario)&&"Administrador"!=t.rol)).map((e=>({name:e.usuario})))})))}));const m=()=>{d.value=window.innerWidth<=500},p=()=>{t("edit-item",{cod_cuenta:D.Z.state.codcuenta,cod_cliente:D.Z.state.codcliente,codigo:i.value,nombre:n.value,usuarios:u.value.map((e=>e.name))}),v()},v=()=>{t("cancel-item")},f=e=>{r.value=e},w=e=>{s.value=e},g=()=>{if(0!=s.value.length){const e=s.value.map((e=>({name:e})));u.value.push(...e),c.value=c.value.filter((t=>-1===e.findIndex((e=>e.name===t.name))))}},b=()=>{if(0!=r.value.length){const e=r.value.map((e=>({name:e})));c.value.push(...e),u.value=u.value.filter((t=>-1===e.findIndex((e=>e.name===t.name))))}};return{dialog:o,name:n,isMobile:d,editItem:p,cancelItem:v,selectedItemsAvailable:s,selectedItemsAssigned:r,itemsAssigned:u,itemsAvailable:c,emitSelectedItemsAssigned:f,emitSelectedItemsAvailable:w,moveSelectedItemsToAssigned:g,moveSelectedItemsToAvailable:b}}};const ae=(0,K.Z)(te,[["render",ee]]);var le=ae,oe=a(3512),ne={components:{CreateGroupVue:$,EditGroupUsersVue:le},setup(){const e=(0,z.iH)([]),t=(0,z.iH)([]),a=(0,z.iH)({}),o=(0,z.iH)(!1);(0,l.bv)((async()=>{await n()}));const n=async()=>{const[a,l]=await Promise.all([(0,I.K)(D.Z.state.codcuenta,D.Z.state.empresa),(0,h.ws)(D.Z.state.codcuenta,D.Z.state.codcliente)]);e.value=a.data.data.filter((e=>e.empresa==D.Z.state.empresa&&"Administrador"!=e.rol)),t.value=l.data.data?l.data.data[0].grupos_usuarios:[]},i=e=>{""!=e.nombre?(0,h.O1)(e).then((()=>{(0,oe.y)((async()=>{await n()}),"success","Logrado","Se ha creado el grupo correctamente")})).catch((()=>{(0,oe.y)((()=>{}),"error","Hubo un error","No se logro crear el grupo")})):(0,oe.y)((()=>{}),"warning","Advertencia","Ingrese un nombre")},s=e=>{(0,oe.M)((async()=>{const t={cod_cuenta:D.Z.state.codcuenta,cod_cliente:D.Z.state.codcliente,codigo:e,ruc_cuenta:D.Z.state.ruc};(0,h.Ow)(t).then((()=>{(0,oe.y)((async()=>{await n()}),"success","Logrado","Se ha eliminado el grupo correctamente")})).catch((e=>{(0,oe.y)((()=>{}),"error","Hubo un error",e.response.data.message)}))}),"¿Estás seguro de eliminar este grupo?","Aceptar")},r=e=>{o.value=!0,a.value=e},u=e=>{(0,h.el)(e).then((()=>{(0,oe.y)((async()=>{await n()}),"success","Logrado","Se ha editado el grupo correctamente")})).catch((()=>{(0,oe.y)((()=>{}),"error","Hubo un error","No se logro editar el grupo")}))};return{dataUsers:e,dataGroupUsers:t,editDialog:o,editItem:a,onCreateItem:i,deleteGroup:s,editGroup:r,onUpdateItem:u}}};const ie=(0,K.Z)(ne,[["render",k]]);var se=ie}}]);
//# sourceMappingURL=401.e9fe40d8.js.map