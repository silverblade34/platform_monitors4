"use strict";(self["webpackChunkplatform_monitors4"]=self["webpackChunkplatform_monitors4"]||[]).push([[565],{9398:function(t,e,a){a.d(e,{AV:function(){return r},Ck:function(){return s},pt:function(){return c}});var n=a(1076);const o="http://67.205.164.216:3000/api/v1";function s(t,e,a,s){return n.Z.post(`${o}/notifications/Account`,{cod_cuenta:t,cod_cliente:e,usuario:a,codigo:s})}function r(t,e,a){return n.Z.post(`${o}/massiveDiscard`,{ids:t,cod_cliente:a,cod_cuenta:e,descripcion_estado:"Descartado",estado:1})}function c(t){return n.Z.post(`${o}/addComment`,t)}},7603:function(t,e,a){a.r(e),a.d(e,{default:function(){return pt}});var n=a(3396);const o={class:"mb-5"},s=(0,n._)("h1",{class:"font-bold text-xl title_poppins"},"Dashboard",-1),r={class:"grid grid-cols-4 gap-5 pt-5"},c={class:"col-span-2 max-h-[50rem]"},l={class:"col-span-1 max-h-[50rem]"},i={class:"col-span-1 max-h-[50rem]"};function d(t,e,a,d,u,p){const m=(0,n.up)("CardEventsVue"),v=(0,n.up)("EventNotificationVue"),g=(0,n.up)("VehicleNotificationVue"),_=(0,n.up)("OperatorNotificationVue");return(0,n.wg)(),(0,n.iD)("div",o,[s,(0,n._)("div",r,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(d.listCards,((t,e)=>((0,n.wg)(),(0,n.j4)(m,{BgCard:t.bgCard,Icon:t.icon,Amount:t.amount,Title:t.title,key:e},null,8,["BgCard","Icon","Amount","Title"])))),128)),(0,n._)("div",c,[(0,n.Wm)(v,{data:d.dataEvents},null,8,["data"])]),(0,n._)("div",l,[(0,n.Wm)(g,{data:d.dataVehicles},null,8,["data"])]),(0,n._)("div",i,[(0,n.Wm)(_,{data:d.dataOperators},null,8,["data"])])])])}var u=a(4870),p=a(7139),m=a(3289);const v={class:"bg-white rounded-lg p-5 grid grid-cols-4 shadow-md items-center"},g={class:"col-span-1 flex items-center justify-start"},_={class:"col-span-3 pl-3 text-gray-500"},f={class:"text-2xl font-bold pt-3"};function w(t,e,a,o,s,r){return(0,n.wg)(),(0,n.iD)("div",v,[(0,n._)("div",g,[(0,n._)("div",{class:(0,p.C_)(["rounded-lg text-white w-full flex justify-center h-[4rem] items-center",a.BgCard])},[(0,n.Wm)(m.t,{size:"large"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,p.zw)(a.Icon),1)])),_:1})],2)]),(0,n._)("div",_,[(0,n._)("p",null,(0,p.zw)(a.Title),1),(0,n._)("p",f,(0,p.zw)(a.Amount),1)])])}var h={props:{BgCard:String,Icon:String,Amount:Number,Title:String}},b=a(89);const x=(0,b.Z)(h,[["render",w]]);var y=x;const C=t=>((0,n.dD)("data-v-471b8928"),t=t(),(0,n.Cn)(),t),k={class:"shadow-md bg-white rounded-lg overflow-hidden"},D={class:"table-auto w-full"},Z=C((()=>(0,n._)("thead",{class:"border-b"},[(0,n._)("tr",null,[(0,n._)("th",{class:"p-3 font-medium text-gray-600"},"Evento"),(0,n._)("th",{class:"p-3 font-medium text-gray-600"},"Cantidad"),(0,n._)("th",{class:"p-3 font-medium text-gray-600"},"Porcentaje")])],-1))),V={class:"text-center container_items text-gray-500"},z={class:"p-3"},E={class:"p-3"},j={class:"p-3"},A={class:"text-center text-xs"},H={class:"w-full bg-gray-300 rounded-full"};function N(t,e,a,o,s,r){return(0,n.wg)(),(0,n.iD)("div",k,[(0,n._)("table",D,[Z,(0,n._)("tbody",V,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.data,(t=>((0,n.wg)(),(0,n.iD)("tr",{key:t.clave},[(0,n._)("td",z,(0,p.zw)(t.clave),1),(0,n._)("td",E,(0,p.zw)(t.valor),1),(0,n._)("td",j,[(0,n._)("p",A,(0,p.zw)(t.porcentaje)+"%",1),(0,n._)("div",H,[(0,n._)("div",{class:"bg-blue-400 text-xs font-medium text-white text-center p-1 leading-none rounded-l-lg",style:(0,p.j5)({width:t.porcentaje+"%"})},null,4)])])])))),128))])])])}var I={props:{data:Array}};const O=(0,b.Z)(I,[["render",N],["__scopeId","data-v-471b8928"]]);var W=O;const B=t=>((0,n.dD)("data-v-269394c1"),t=t(),(0,n.Cn)(),t),K={class:"h-full shadow-md bg-white rounded-lg"},P=B((()=>(0,n._)("p",{class:"border-b p-3 font-medium text-gray-600 text-center"}," Notificaciones por vehiculos ",-1))),S={class:"container_items container_scroll"},T={class:"px-2"},Y={class:"w-full pl-2 text-gray-500"},$={class:"font-bold text-light-green-darken-1 text-xl pr-2"};function U(t,e,a,o,s,r){return(0,n.wg)(),(0,n.iD)("div",K,[P,(0,n._)("div",S,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.data,(t=>((0,n.wg)(),(0,n.iD)("div",{class:"p-4 flex items-center border-t",key:t.clave},[(0,n._)("span",T,[(0,n.Wm)(m.t,{size:"large",color:"cyan-lighten-1"},{default:(0,n.w5)((()=>[(0,n.Uk)("mdi-truck")])),_:1})]),(0,n._)("span",Y,(0,p.zw)(t.clave),1),(0,n._)("span",$,(0,p.zw)(t.valor),1)])))),128))])])}var F={props:{data:Array}};const G=(0,b.Z)(F,[["render",U],["__scopeId","data-v-269394c1"]]);var q=G;const J=t=>((0,n.dD)("data-v-4e7a0d46"),t=t(),(0,n.Cn)(),t),L={class:"h-full shadow-md bg-white rounded-lg"},M=J((()=>(0,n._)("p",{class:"border-b p-3 font-medium text-gray-600 text-center"}," Not. atendidas por operador ",-1))),Q={class:"container_items container_scroll"},R={class:"px-3"},X={class:"w-full pl-2 text-gray-500"},tt={class:"font-bold text-cyan-lighten-1 text-xl pr-3"};function et(t,e,a,o,s,r){return(0,n.wg)(),(0,n.iD)("div",L,[M,(0,n._)("div",Q,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.data,(t=>((0,n.wg)(),(0,n.iD)("div",{class:"p-4 flex items-center border-t",key:t.clave},[(0,n._)("span",R,[(0,n.Wm)(m.t,{size:"large",color:"light-green-darken-1"},{default:(0,n.w5)((()=>[(0,n.Uk)("mdi-account-tie-voice-outline")])),_:1})]),(0,n._)("span",X,(0,p.zw)(t.clave),1),(0,n._)("span",tt,(0,p.zw)(t.valor),1)])))),128))])])}var at={props:{data:Array}};const nt=(0,b.Z)(at,[["render",et],["__scopeId","data-v-4e7a0d46"]]);var ot=nt,st=a(9398),rt=a(1076);const ct="http://67.205.164.216:3000/api/v1";function lt(t,e,a,n){return rt.Z.post(`${ct}/home/clientes`,{cod_cuenta:t,cod_cliente:e,usuario:a,cod_regla:n})}var it=a(4239),dt={name:"HomeView",components:{CardEventsVue:y,EventNotificationVue:W,VehicleNotificationVue:q,OperatorNotificationVue:ot},setup(){const t=(0,u.iH)([{bgCard:"bg-yellow-400",icon:"mdi-bell",amount:0,title:"Eventos sin atender",key:"unattended_events"},{bgCard:"bg-sky-400",icon:"mdi-account-tie-voice",amount:0,title:"Eventos en GestiÃ³n",key:"events_in_management"},{bgCard:"bg-lime-400",icon:"mdi-account-check",amount:0,title:"Eventos confirmados",key:"confirmed_events"},{bgCard:"bg-red-400",icon:"mdi-bell-remove",amount:0,title:"Eventos descartados",key:"discarded_events"}]),e=(0,u.iH)([]),a=(0,u.iH)([]),o=(0,u.iH)([]),s=async()=>{const[n,s]=await Promise.all([(0,st.Ck)(it.Z.state.codcuenta,it.Z.state.codclienteAdmin,it.Z.state.username,it.Z.state.codregla),lt(it.Z.state.codcuenta,it.Z.state.codclienteAdmin,it.Z.state.username,it.Z.state.codregla)]),l=n.data.data;Promise.all([c(s.data.data_eventos),c(s.data.data_vehiculos),c(s.data.data_operadores)]).then((([t,n,s])=>{e.value=t,a.value=n,o.value=s})).catch((t=>{console.error("Error:",t)}));const i=[r(l,"Sin Atender"),r(l,"En Gestion"),r(l,"Confirmado"),r(l,"Descartado")],d=await Promise.all(i);t.value[0].amount=d[0].length,t.value[1].amount=d[1].length,t.value[2].amount=d[2].length,t.value[3].amount=d[3].length};(0,n.bv)((async()=>{s()})),setInterval((()=>{s()}),1e4);const r=async(t,e)=>t?t.filter((t=>t.descripcion_estado===e)):[],c=async t=>{const e=Object.values(t).reduce(((t,e)=>t+e),0),a=Object.entries(t).map((([t,a])=>{const n=(a/e*100).toFixed(2);return{clave:t,valor:a,porcentaje:parseFloat(n)}}));return a.sort(((t,e)=>e.porcentaje-t.porcentaje)),a};return{listCards:t,dataEvents:e,dataVehicles:a,dataOperators:o}}};const ut=(0,b.Z)(dt,[["render",d]]);var pt=ut}}]);
//# sourceMappingURL=565.ee29333f.js.map