"use strict";(self["webpackChunkplatform_monitors4"]=self["webpackChunkplatform_monitors4"]||[]).push([[371],{9398:function(t,e,a){a.d(e,{AV:function(){return s},Ck:function(){return r},pt:function(){return i}});var n=a(1076);const o="http://67.205.164.216:3000/api/v1";function r(t,e,a,r){return n.Z.post(`${o}/notifications/Account`,{cod_cuenta:t,cod_cliente:e,usuario:a,codigo:r})}function s(t,e,a){return n.Z.post(`${o}/massiveDiscard`,{ids:t,cod_cliente:a,cod_cuenta:e,descripcion_estado:"Descartado",estado:1})}function i(t){return n.Z.post(`${o}/addComment`,t)}},6365:function(t,e,a){a.d(e,{$d:function(){return r},DL:function(){return i},Ex:function(){return d},Kb:function(){return s},Zd:function(){return l},dN:function(){return c}});var n=a(1076);const o="http://67.205.164.216:3000/api/v1";function r(t){return n.Z.post(`${o}/listAccounts`,{cod_cuenta:t})}function s(t,e){return n.Z.post(`${o}/listClients`,{cod_cuenta:t,empresa:e})}function i(t){return n.Z.post(`${o}/createClient`,t)}function c(t){return n.Z.put(`${o}/editClient`,t)}function l(t){return n.Z.post(`${o}/deleteClient`,t)}function d(t){return n.Z.post(`${o}/repeatUser`,{usuario:t})}},3518:function(t,e,a){a.d(e,{bo:function(){return r},cD:function(){return i},di:function(){return s},md:function(){return c}});var n=a(1076);const o="http://67.205.164.216:3000/api/v1";function r(t,e){return n.Z.post(`${o}/allUnits`,{cod_cuenta:t,cod_cliente:e})}function s(t){return n.Z.post(`${o}/createUnits`,t)}function i(t){return n.Z.put(`${o}/editUnits`,t)}function c(t){return n.Z.post(`${o}/deleteUnits`,t)}},88:function(t,e,a){a.r(e),a.d(e,{default:function(){return vt}});var n=a(3396);const o={class:"mb-5"},r=(0,n._)("h1",{class:"font-bold text-xl title_poppins"},"Dashboard",-1),s={class:"grid grid-cols-4 gap-5 pt-5"},i={class:"col-span-2 max-h-[50rem]"},c={class:"col-span-1 max-h-[50rem]"},l={class:"col-span-1 max-h-[50rem]"};function d(t,e,a,d,u,p){const m=(0,n.up)("CardEventsVue"),v=(0,n.up)("EventNotificationVue"),f=(0,n.up)("VehicleNotificationVue"),g=(0,n.up)("OperatorNotificationVue");return(0,n.wg)(),(0,n.iD)("div",o,[r,(0,n._)("div",s,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(d.listCards,((t,e)=>((0,n.wg)(),(0,n.j4)(m,{BgCard:t.bgCard,Icon:t.icon,Amount:t.amount,Title:t.title,key:e},null,8,["BgCard","Icon","Amount","Title"])))),128)),(0,n._)("div",i,[(0,n.Wm)(v,{data:d.dataEvents},null,8,["data"])]),(0,n._)("div",c,[(0,n.Wm)(f,{data:d.dataVehicles},null,8,["data"])]),(0,n._)("div",l,[(0,n.Wm)(g,{data:d.dataOperators},null,8,["data"])])])])}var u=a(4870),p=a(7139),m=a(3289);const v={class:"bg-white rounded-lg p-5 grid grid-cols-4 shadow-md items-center"},f={class:"col-span-1 flex items-center justify-start"},g={class:"col-span-3 pl-3 text-gray-500"},_={class:"text-2xl font-bold pt-3"};function h(t,e,a,o,r,s){return(0,n.wg)(),(0,n.iD)("div",v,[(0,n._)("div",f,[(0,n._)("div",{class:(0,p.C_)(["rounded-lg text-white w-full flex justify-center h-[4rem] items-center",a.BgCard])},[(0,n.Wm)(m.t,{size:"large"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,p.zw)(a.Icon),1)])),_:1})],2)]),(0,n._)("div",g,[(0,n._)("p",null,(0,p.zw)(a.Title),1),(0,n._)("p",_,(0,p.zw)(a.Amount),1)])])}var w={props:{BgCard:String,Icon:String,Amount:Number,Title:String}},b=a(89);const x=(0,b.Z)(w,[["render",h]]);var y=x;const Z=t=>((0,n.dD)("data-v-471b8928"),t=t(),(0,n.Cn)(),t),C={class:"shadow-md bg-white rounded-lg overflow-hidden"},k={class:"table-auto w-full"},D=Z((()=>(0,n._)("thead",{class:"border-b"},[(0,n._)("tr",null,[(0,n._)("th",{class:"p-3 font-medium text-gray-600"},"Evento"),(0,n._)("th",{class:"p-3 font-medium text-gray-600"},"Cantidad"),(0,n._)("th",{class:"p-3 font-medium text-gray-600"},"Porcentaje")])],-1))),A={class:"text-center container_items text-gray-500"},$={class:"p-3"},E={class:"p-3"},V={class:"p-3"},z={class:"text-center text-xs"},j={class:"w-full bg-gray-300 rounded-full"};function N(t,e,a,o,r,s){return(0,n.wg)(),(0,n.iD)("div",C,[(0,n._)("table",k,[D,(0,n._)("tbody",A,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.data,(t=>((0,n.wg)(),(0,n.iD)("tr",{key:t.clave},[(0,n._)("td",$,(0,p.zw)(t.clave),1),(0,n._)("td",E,(0,p.zw)(t.valor),1),(0,n._)("td",V,[(0,n._)("p",z,(0,p.zw)(t.porcentaje)+"%",1),(0,n._)("div",j,[(0,n._)("div",{class:"bg-blue-400 text-xs font-medium text-white text-center p-1 leading-none rounded-l-lg",style:(0,p.j5)({width:t.porcentaje+"%"})},null,4)])])])))),128))])])])}var H={props:{data:Array}};const U=(0,b.Z)(H,[["render",N],["__scopeId","data-v-471b8928"]]);var I=U;const O=t=>((0,n.dD)("data-v-269394c1"),t=t(),(0,n.Cn)(),t),W={class:"h-full shadow-md bg-white rounded-lg"},K=O((()=>(0,n._)("p",{class:"border-b p-3 font-medium text-gray-600 text-center"}," Notificaciones por vehiculos ",-1))),P={class:"container_items container_scroll"},B={class:"px-2"},S={class:"w-full pl-2 text-gray-500"},T={class:"font-bold text-light-green-darken-1 text-xl pr-2"};function Y(t,e,a,o,r,s){return(0,n.wg)(),(0,n.iD)("div",W,[K,(0,n._)("div",P,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.data,(t=>((0,n.wg)(),(0,n.iD)("div",{class:"p-4 flex items-center border-t",key:t.clave},[(0,n._)("span",B,[(0,n.Wm)(m.t,{size:"large",color:"cyan-lighten-1"},{default:(0,n.w5)((()=>[(0,n.Uk)("mdi-truck")])),_:1})]),(0,n._)("span",S,(0,p.zw)(t.clave),1),(0,n._)("span",T,(0,p.zw)(t.valor),1)])))),128))])])}var F={props:{data:Array}};const G=(0,b.Z)(F,[["render",Y],["__scopeId","data-v-269394c1"]]);var L=G;const M=t=>((0,n.dD)("data-v-4e7a0d46"),t=t(),(0,n.Cn)(),t),q={class:"h-full shadow-md bg-white rounded-lg"},J=M((()=>(0,n._)("p",{class:"border-b p-3 font-medium text-gray-600 text-center"}," Not. atendidas por operador ",-1))),Q={class:"container_items container_scroll"},R={class:"px-3"},X={class:"w-full pl-2 text-gray-500"},tt={class:"font-bold text-cyan-lighten-1 text-xl pr-3"};function et(t,e,a,o,r,s){return(0,n.wg)(),(0,n.iD)("div",q,[J,(0,n._)("div",Q,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.data,(t=>((0,n.wg)(),(0,n.iD)("div",{class:"p-4 flex items-center border-t",key:t.clave},[(0,n._)("span",R,[(0,n.Wm)(m.t,{size:"large",color:"light-green-darken-1"},{default:(0,n.w5)((()=>[(0,n.Uk)("mdi-account-tie-voice-outline")])),_:1})]),(0,n._)("span",X,(0,p.zw)(t.clave),1),(0,n._)("span",tt,(0,p.zw)(t.valor),1)])))),128))])])}var at={props:{data:Array}};const nt=(0,b.Z)(at,[["render",et],["__scopeId","data-v-4e7a0d46"]]);var ot=nt,rt=a(9398),st=a(6365),it=a(3518),ct=a(1076);const lt="http://67.205.164.216:3000/api/v1";function dt(t,e,a,n){return ct.Z.post(`${lt}/home/clientes`,{cod_cuenta:t,cod_cliente:e,usuario:a,cod_regla:n})}var ut=a(4239),pt={name:"HomeView",components:{CardEventsVue:y,EventNotificationVue:I,VehicleNotificationVue:L,OperatorNotificationVue:ot},setup(){const t=(0,u.iH)([{bgCard:"bg-yellow-400",icon:"mdi-bell",amount:0,title:"Eventos sin atender",key:"unattended_events"},{bgCard:"bg-sky-400",icon:"mdi-account-tie-voice",amount:0,title:"Eventos en Gestión",key:"events_in_management"},{bgCard:"bg-lime-400",icon:"mdi-account-check",amount:0,title:"Eventos confirmados",key:"confirmed_events"},{bgCard:"bg-red-400",icon:"mdi-bell-remove",amount:0,title:"Eventos descartados",key:"discarded_events"}]),e=(0,u.iH)([]),a=(0,u.iH)([]),o=(0,u.iH)([]),r=async()=>{"All"==ut.Z.state.codclienteAdmin?s():i()},s=async()=>{t.value[0].title="Eventos del día",t.value[1].title="Clientes registrados",t.value[2].title="Operadores registrados",t.value[3].title="Unidades registradas",t.value[3].icon="mdi-truck";const[e,a]=await Promise.all([(0,st.$d)(ut.Z.state.codcuenta),(0,it.bo)(ut.Z.state.codcuenta,ut.Z.state.codclienteAdmin)]),n=e.data.data[0].clientes?e.data.data[0].clientes:[],o=n.filter((t=>"Administrador"==t.rol)),r=n.filter((t=>"Administrador"!=t.rol)),s=a.data.data?a.data.data:[],i=s.flatMap((t=>t.unidades.map((t=>t.cod_unidad))));t.value[1].amount=o.length,t.value[2].amount=r.length,t.value[3].amount=i.length},i=async()=>{const[n,r]=await Promise.all([(0,rt.Ck)(ut.Z.state.codcuenta,ut.Z.state.codclienteAdmin,ut.Z.state.username,ut.Z.state.codregla),dt(ut.Z.state.codcuenta,ut.Z.state.codclienteAdmin,ut.Z.state.username,ut.Z.state.codregla)]),s=n.data.data;Promise.all([l(r.data.data_eventos),l(r.data.data_vehiculos),l(r.data.data_operadores)]).then((([t,n,r])=>{e.value=t,a.value=n,o.value=r})).catch((t=>{console.error("Error:",t)}));const i=[c(s,"Sin Atender"),c(s,"En Gestion"),c(s,"Confirmado"),c(s,"Descartado")],d=await Promise.all(i);t.value[0].amount=d[0].length,t.value[1].amount=d[1].length,t.value[2].amount=d[2].length,t.value[3].amount=d[3].length};(0,n.bv)((async()=>{r()})),setInterval((()=>{r()}),1e4);const c=async(t,e)=>t?t.filter((t=>t.descripcion_estado===e)):[],l=async t=>{const e=Object.values(t).reduce(((t,e)=>t+e),0),a=Object.entries(t).map((([t,a])=>{const n=(a/e*100).toFixed(2);return{clave:t,valor:a,porcentaje:parseFloat(n)}}));return a.sort(((t,e)=>e.porcentaje-t.porcentaje)),a};return{listCards:t,dataEvents:e,dataVehicles:a,dataOperators:o}}};const mt=(0,b.Z)(pt,[["render",d]]);var vt=mt}}]);
//# sourceMappingURL=371.85f59d83.js.map