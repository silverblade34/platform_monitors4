"use strict";(self["webpackChunkplatform_monitors4"]=self["webpackChunkplatform_monitors4"]||[]).push([[406],{5090:function(e,t,o){o.d(t,{A3:function(){return i},DN:function(){return s},Ez:function(){return l},vQ:function(){return r}});var n=o(1076);const a="http://67.205.164.216:3000/api/v1";function l(e,t){return n.Z.post(`${a}/allGroupsEventtypes`,{cod_cuenta:e,cod_cliente:t})}function s(e){return n.Z.post(`${a}/createGroupEventtypes`,e)}function i(e){return n.Z.post(`${a}/deleteGroupEventtypes`,e)}function r(e){return n.Z.post(`${a}/editGroupsEventtypes`,e)}},3031:function(e,t,o){o.d(t,{Ub:function(){return i},XX:function(){return s},lE:function(){return r},o$:function(){return l}});var n=o(1076);const a="http://67.205.164.216:3000/api/v1";function l(e,t){return n.Z.post(`${a}/allGroupsUnits`,{cod_cuenta:e,cod_cliente:t})}function s(e){return n.Z.post(`${a}/createGroupUnits`,e)}function i(e){return n.Z.post(`${a}/deleteGroupUnits`,e)}function r(e){return n.Z.post(`${a}/editGroupsUnits`,e)}},1329:function(e,t,o){o.d(t,{O1:function(){return s},Ow:function(){return i},el:function(){return r},ws:function(){return l}});var n=o(1076);const a="http://67.205.164.216:3000/api/v1";function l(e,t){return n.Z.post(`${a}/allGroupsUsers`,{cod_cuenta:e,cod_cliente:t})}function s(e){return n.Z.post(`${a}/createGroupUsers`,e)}function i(e){return n.Z.post(`${a}/deleteGroupUsers`,e)}function r(e){return n.Z.post(`${a}/editGroupsUsers`,e)}},3512:function(e,t,o){o.d(t,{M:function(){return s},y:function(){return l}});var n=o(2492),a=o.n(n);function l(e,t,o,n){a().fire({icon:t,html:`<p class="text-lg font-semibold">${o}</p>\n          <p class="text-base">${n}</p>`,showCancelButton:!1,confirmButtonText:"Aceptar",confirmButtonColor:"#006cac",reverseButtons:!0}).then((t=>{t.isConfirmed&&e()}))}function s(e,t,o){a().fire({icon:"question",html:`<p class="text-lg">${t}</p>`,showCancelButton:!0,reverseButtons:!0,confirmButtonText:o,confirmButtonColor:"#3b82f6",cancelButtonText:"Cancelar"}).then((t=>{t.isConfirmed&&e()}))}},5754:function(e,t,o){o.r(t),o.d(t,{default:function(){return De}});var n=o(3396);const a={class:"flex justify-between w-full"},l=(0,n._)("div",null,[(0,n._)("h1",{class:"font-bold text-xl title_poppins pb-5"},"Reglas")],-1);function s(e,t,o,s,i,r){const u=(0,n.up)("CreateRulesVue"),d=(0,n.up)("TableRulesVue"),c=(0,n.up)("EditRulesVue");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("div",null,[(0,n._)("div",a,[l,(0,n.Wm)(u,{onCreateItem:s.onCreateItem,dataGroupUnitsProps:s.dataGroupUnits,dataGroupUsersProps:s.dataGroupUsers,dataGroupEventsProps:s.dataGroupEvents},null,8,["onCreateItem","dataGroupUnitsProps","dataGroupUsersProps","dataGroupEventsProps"])]),(0,n.Wm)(d,{desserts:s.listRulesData,dataGroupUnitsProps:s.dataGroupUnits,dataGroupUsersProps:s.dataGroupUsers,dataGroupEventsProps:s.dataGroupEvents,onDeleteItem:s.onDeleteItem,onEditItem:s.onEditItem},null,8,["desserts","dataGroupUnitsProps","dataGroupUsersProps","dataGroupEventsProps","onDeleteItem","onEditItem"])]),(0,n.Wm)(c,{openModal:s.editDialog,itemEdit:s.editItem,onCancelItem:t[0]||(t[0]=e=>s.editDialog=!1),onEditItem:s.onUpdateItem},null,8,["openModal","itemEdit","onEditItem"])],64)}var i=o(1076);const r="http://67.205.164.216:3000/api/v1";function u(e,t){return i.Z.post(`${r}/allRoules`,{cod_cuenta:e,cod_cliente:t})}function d(e){return i.Z.post(`${r}/createRoules`,e)}function c(e){return i.Z.post(`${r}/editRoules`,e)}function p(e){return i.Z.post(`${r}/deleteRoules`,e)}var m=o(1329),v=o(5090),g=o(3031),f=o(7312),b=o(5039),w=o(1888),_=o(1334),G=o(3601),x=o(8521),y=o(9234),U=o(3289),h=o(165),A=o(1328);const I=(0,n._)("span",{class:"px-4 w-full text-center text-blue-400 font-bold title_views"},"Crear regla",-1),W=(0,n._)("div",{class:"w-full bg-blue-400 text-white rounded-sm py-1 px-3 my-2 text-center text-sm"},"Grupos de usuarios ",-1),E=(0,n._)("div",{class:"w-full bg-blue-400 text-white rounded-sm py-1 px-3 my-2 text-center text-sm"},"Grupos de unidades ",-1),k=(0,n._)("div",{class:"w-full bg-blue-400 text-white rounded-sm py-1 px-3 my-2 text-center text-sm"},"Grupos de eventos ",-1);function C(e,t,o,a,l,s){const i=(0,n.up)("SelectGroups");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n.Wm)(f.T,{size:"small",color:"blue",onClick:t[0]||(t[0]=e=>a.dialog=!0)},{default:(0,n.w5)((()=>[(0,n.Wm)(U.t,{icon:"mdi-plus"}),(0,n.Uk)(" Crear Nuevo")])),_:1}),(0,n.Wm)(G.B,{modelValue:a.dialog,"onUpdate:modelValue":t[2]||(t[2]=e=>a.dialog=e),width:"680","onClick:outside":a.cancelItem},{default:(0,n.w5)((()=>[(0,n.Wm)(b._,null,{default:(0,n.w5)((()=>[(0,n.Wm)(A.i,null,{default:(0,n.w5)((()=>[I])),_:1}),(0,n.Wm)(w.Z,null,{default:(0,n.w5)((()=>[(0,n.Wm)(x.D,{cols:"12"},{default:(0,n.w5)((()=>[(0,n.Wm)(h.h,{variant:"outlined",label:"Nombre","prepend-inner-icon":"mdi-form-textbox",color:"indigo",modelValue:a.name,"onUpdate:modelValue":t[1]||(t[1]=e=>a.name=e),"hide-details":""},null,8,["modelValue"]),W,(0,n.Wm)(i,{assigned:a.assignedUsers,available:a.dataGroupUsers,isMobile:a.isMobile,onSelectedGroups:a.selectedUsersGroup},null,8,["assigned","available","isMobile","onSelectedGroups"]),E,(0,n.Wm)(i,{assigned:a.assignedUnits,available:a.dataGroupUnits,isMobile:a.isMobile,onSelectedGroups:a.selectedUnitsGroup},null,8,["assigned","available","isMobile","onSelectedGroups"]),k,(0,n.Wm)(i,{assigned:a.assignedEvents,available:a.dataGroupEvents,isMobile:a.isMobile,onSelectedGroups:a.selectedEventsGroup},null,8,["assigned","available","isMobile","onSelectedGroups"])])),_:1})])),_:1}),(0,n.Wm)(_.h,null,{default:(0,n.w5)((()=>[(0,n.Wm)(y.C),(0,n.Wm)(f.T,{color:"blue-grey-lighten-2",variant:"tonal",onClick:a.cancelItem},{default:(0,n.w5)((()=>[(0,n.Uk)(" Cancelar ")])),_:1},8,["onClick"]),(0,n.Wm)(f.T,{color:"blue-lighten-1",variant:"tonal",onClick:a.createItem},{default:(0,n.w5)((()=>[(0,n.Uk)(" Aceptar ")])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue","onClick:outside"])],64)}var S=o(4239),V=o(4870),H=o(9242),P=o(678);const Z={class:"w-full block lg:flex gap-1 items-center"},M={class:"w-full"},T={class:"flex justify-center lg:block"},D={class:"my-1"},Y={class:"my-1"},$={class:"w-full"};function B(e,t,o,a,l,s){const i=(0,n.up)("SelectItemsAndMoveVue");return(0,n.wg)(),(0,n.iD)("div",Z,[(0,n._)("div",M,[(0,n.Wm)(f.T,{density:"compact",class:"w-full mb-2 text-none",color:"blue-lighten-1",variant:"tonal"},{default:(0,n.w5)((()=>[(0,n.Uk)(" DISPONIBLES ")])),_:1}),(0,n.Wm)(i,{listGroups:a.itemsAvailable,onListSeleccionados:a.emitSelectedItemsAvailable},null,8,["listGroups","onListSeleccionados"])]),(0,n._)("div",T,[(0,n._)("div",D,[(0,n.Wm)(f.T,{icon:o.isMobile?"mdi-arrow-down":"mdi-arrow-right",variant:"tonal",size:"small",color:"indigo",onClick:(0,H.iM)(a.moveSelectedItemsToAssigned,["prevent"])},null,8,["icon","onClick"]),(0,n.Wm)(P.N,{activator:"parent",location:"top"},{default:(0,n.w5)((()=>[(0,n.Uk)("Agregar")])),_:1})]),(0,n._)("div",Y,[(0,n.Wm)(f.T,{icon:o.isMobile?"mdi-arrow-up":"mdi-arrow-left",variant:"tonal",size:"small",color:"indigo",onClick:(0,H.iM)(a.moveSelectedItemsToAvailable,["prevent"])},null,8,["icon","onClick"]),(0,n.Wm)(P.N,{activator:"parent",location:"top"},{default:(0,n.w5)((()=>[(0,n.Uk)("Quitar")])),_:1})])]),(0,n._)("div",$,[(0,n.Wm)(f.T,{density:"compact",class:"w-full mb-2 text-none",color:"blue-lighten-1",variant:"tonal"},{default:(0,n.w5)((()=>[(0,n.Uk)(" ASIGNADOS ")])),_:1}),(0,n.Wm)(i,{listGroups:a.itemsAssigned,onListSeleccionados:a.emitSelectedItemsAssigned},null,8,["listGroups","onListSeleccionados"])])])}o(560);var R=o(7139);const j={class:"w-full"},L={class:"w-full rounded h-[8rem] overflow-y-auto p-2 border container_scroll",id:"grupos-disponibles"},N=["onClick"];function z(e,t,o,a,l,s){return(0,n.wg)(),(0,n.iD)("div",j,[(0,n._)("div",L,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.listGroupsInitial,(e=>((0,n.wg)(),(0,n.iD)("p",{key:e.nombre,class:(0,R.C_)(["p-1 pl-2 text-sm my-1 ease-in duration-100 cursor-pointer rounded-sm",{"bg-blue-200":a.selectedItems.includes(e.nombre),"bg-gray-200 hover:bg-gray-300":!a.selectedItems.includes(e.nombre)}]),onClick:t=>a.toggleSelection(e.nombre,t)},(0,R.zw)(a.truncateText(e.nombre)),11,N)))),128))])])}var F={props:{listGroups:Array},emits:["list-seleccionados"],setup(e,{emit:t}){const o=(0,V.iH)(e.listGroups),a=(0,V.iH)([]);(0,n.YP)((()=>e.listGroups),(e=>{o.value=e})),(0,n.YP)((()=>a.value),(e=>{t("list-seleccionados",e)}));const l=(e,o)=>{const n=a.value.indexOf(e);n>-1?a.value.splice(n,1):(o.ctrlKey||o.metaKey?a.value.push(e):a.value=[e],t("list-seleccionados",a.value))},s=()=>{a.value=o.value.map((e=>e.nombre))},i=e=>e&&e.length>25?e.slice(0,25)+"...":e;return{selectedItems:a,listGroupsInitial:o,toggleSelectionAll:s,toggleSelection:l,truncateText:i}}},O=o(89);const Q=(0,O.Z)(F,[["render",z]]);var K=Q,J={props:{isMobile:Boolean,assigned:Array,available:Array},components:{SelectItemsAndMoveVue:K},emits:["selected-groups"],setup(e,{emit:t}){const o=(0,V.iH)([]),a=(0,V.iH)([]),l=(0,V.iH)([]),s=(0,V.iH)([]);(0,n.bv)((()=>{l.value=e.assigned,s.value=e.available})),(0,n.YP)((()=>e.assigned),(t=>{l.value=t,s.value=e.available})),(0,n.YP)((()=>e.available),(t=>{s.value=t,l.value=e.assigned}));const i=e=>{a.value=e},r=e=>{o.value=e},u=()=>{if(0!=o.value.length){const e=o.value.map((e=>({nombre:e})));l.value.push(...e),s.value=s.value.filter((t=>-1===e.findIndex((e=>e.nombre===t.nombre))))}},d=()=>{if(0!=a.value.length){const e=a.value.map((e=>({nombre:e})));s.value.push(...e),l.value=l.value.filter((t=>-1===e.findIndex((e=>e.nombre===t.nombre))))}};return(0,n.YP)((()=>l.value),(e=>{t("selected-groups",{itemsAssigned:e,itemsAvailable:s.value})})),(0,n.YP)((()=>s.value),(e=>{t("selected-groups",{itemsAssigned:l.value,itemsAvailable:e})})),{selectedItemsAvailable:o,selectedItemsAssigned:a,itemsAssigned:l,itemsAvailable:s,emitSelectedItemsAssigned:i,emitSelectedItemsAvailable:r,moveSelectedItemsToAssigned:u,moveSelectedItemsToAvailable:d}}};const X=(0,O.Z)(J,[["render",B]]);var q=X,ee={props:{dataGroupUnitsProps:Array,dataGroupUsersProps:Array,dataGroupEventsProps:Array},components:{SelectGroups:q},emits:["create-item"],setup(e,{emit:t}){const o=(0,V.iH)(!1),a=(0,V.iH)(""),l=(0,V.iH)(!1),s=(0,V.iH)([]),i=(0,V.iH)([]),r=(0,V.iH)([]),u=(0,V.iH)([]),d=(0,V.iH)([]),c=(0,V.iH)([]),p=(0,V.iH)([]),m=(0,V.iH)([]),v=(0,V.iH)([]);(0,n.YP)((()=>o.value),(e=>{1==e&&(g(),window.addEventListener("resize",g))})),(0,n.YP)((()=>e.dataGroupUnitsProps),(e=>{s.value=e.map((e=>({nombre:e.nombre})))})),(0,n.YP)((()=>e.dataGroupUsersProps),(e=>{i.value=e.map((e=>({nombre:e.nombre})))})),(0,n.YP)((()=>e.dataGroupEventsProps),(e=>{r.value=e.map((e=>({nombre:e.nombre})))}));const g=()=>{l.value=window.innerWidth<=500},f=()=>{t("create-item",{cod_cuenta:S.Z.state.codcuenta,cod_cliente:S.Z.state.codclienteAdmin,empresa:S.Z.state.empresa,regla:a.value,cod_grupotiposdeventos:c.value,cod_grupounidades:u.value,cod_grupousuarios:d.value}),b()},b=()=>{a.value="",p.value=[],m.value=[],v.value=[],o.value=!1},w=e=>{d.value=e.itemsAssigned.map((e=>e.nombre))},_=e=>{u.value=e.itemsAssigned.map((e=>e.nombre))},G=e=>{c.value=e.itemsAssigned.map((e=>e.nombre))};return{assignedEvents:v,assignedUnits:m,assignedUsers:p,dataGroupUnits:s,dataGroupUsers:i,dataGroupEvents:r,dialog:o,name:a,isMobile:l,createItem:f,cancelItem:b,selectedUsersGroup:w,selectedUnitsGroup:_,selectedEventsGroup:G}}};const te=(0,O.Z)(ee,[["render",C]]);var oe=te;const ne=(0,n._)("span",{class:"px-4 w-full text-center text-blue-400 font-bold title_views"},"Editar regla",-1),ae=(0,n._)("div",{class:"w-full bg-blue-400 text-white rounded-sm py-1 px-3 my-2 text-center text-sm"},"Grupos de usuarios ",-1),le=(0,n._)("div",{class:"w-full bg-blue-400 text-white rounded-sm py-1 px-3 my-2 text-center text-sm"},"Grupos de unidades ",-1),se=(0,n._)("div",{class:"w-full bg-blue-400 text-white rounded-sm py-1 px-3 my-2 text-center text-sm"},"Grupos de eventos ",-1);function ie(e,t,o,a,l,s){const i=(0,n.up)("SelectGroups");return(0,n.wg)(),(0,n.j4)(G.B,{modelValue:a.dialog,"onUpdate:modelValue":t[1]||(t[1]=e=>a.dialog=e),width:"680","onClick:outside":a.cancelItem},{default:(0,n.w5)((()=>[(0,n.Wm)(b._,null,{default:(0,n.w5)((()=>[(0,n.Wm)(A.i,null,{default:(0,n.w5)((()=>[ne])),_:1}),(0,n.Wm)(w.Z,null,{default:(0,n.w5)((()=>[(0,n.Wm)(x.D,{cols:"12"},{default:(0,n.w5)((()=>[(0,n.Wm)(h.h,{variant:"outlined",label:"Nombre","prepend-inner-icon":"mdi-form-textbox",color:"indigo",modelValue:a.name,"onUpdate:modelValue":t[0]||(t[0]=e=>a.name=e),"hide-details":""},null,8,["modelValue"]),ae,(0,n.Wm)(i,{assigned:a.assignedUsers,available:a.dataGroupUsers,isMobile:a.isMobile,onSelectedGroups:a.selectedUsersGroup},null,8,["assigned","available","isMobile","onSelectedGroups"]),le,(0,n.Wm)(i,{assigned:a.assignedUnits,available:a.dataGroupUnits,isMobile:a.isMobile,onSelectedGroups:a.selectedUnitsGroup},null,8,["assigned","available","isMobile","onSelectedGroups"]),se,(0,n.Wm)(i,{assigned:a.assignedEvents,available:a.dataGroupEvents,isMobile:a.isMobile,onSelectedGroups:a.selectedEventsGroup},null,8,["assigned","available","isMobile","onSelectedGroups"])])),_:1})])),_:1}),(0,n.Wm)(_.h,null,{default:(0,n.w5)((()=>[(0,n.Wm)(y.C),(0,n.Wm)(f.T,{color:"blue-grey-lighten-2",variant:"tonal",onClick:a.cancelItem},{default:(0,n.w5)((()=>[(0,n.Uk)(" Cancelar ")])),_:1},8,["onClick"]),(0,n.Wm)(f.T,{color:"blue-lighten-1",variant:"tonal",onClick:a.editItem},{default:(0,n.w5)((()=>[(0,n.Uk)(" Aceptar ")])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue","onClick:outside"])}var re={props:{itemEdit:Object,openModal:Boolean},components:{SelectGroups:q},emits:["edit-item","cancel-item"],setup(e,{emit:t}){const o=(0,V.iH)(!1),a=(0,V.iH)(""),l=(0,V.iH)(!1),s=(0,V.iH)([]),i=(0,V.iH)([]),r=(0,V.iH)([]),u=(0,V.iH)([]),d=(0,V.iH)([]),c=(0,V.iH)([]),p=(0,V.iH)([]),m=(0,V.iH)([]),v=(0,V.iH)([]);(0,n.YP)((()=>e.openModal),(e=>{o.value=e,1==e&&(g(),window.addEventListener("resize",g))})),(0,n.YP)((()=>e.itemEdit),(e=>{0!==Object.keys(e).length&&(a.value=e.item.regla,s.value=e.editAvailableGroupUnits,i.value=e.editAvailableGroupUsers,r.value=e.editAvailableGroupEvents,p.value=e.editAssignedGroupUsers,m.value=e.editAssignedGroupUnits,v.value=e.editAssignedGroupEvents)}));const g=()=>{l.value=window.innerWidth<=500},f=()=>{t("edit-item",{cod_cuenta:S.Z.state.codcuenta,cod_cliente:S.Z.state.codclienteAdmin,regla:a.value,codigo:e.itemEdit.item.codigo,cod_grupotiposdeventos:c.value,cod_grupounidades:u.value,cod_grupousuarios:d.value}),b()},b=()=>{a.value="",p.value=m.value=v.value=[],t("cancel-item")},w=e=>{d.value=e.itemsAssigned.map((e=>e.nombre))},_=e=>{u.value=e.itemsAssigned.map((e=>e.nombre))},G=e=>{c.value=e.itemsAssigned.map((e=>e.nombre))};return{dialog:o,name:a,isMobile:l,assignedEvents:v,assignedUnits:m,assignedUsers:p,dataGroupUnits:s,dataGroupUsers:i,dataGroupEvents:r,editItem:f,cancelItem:b,selectedUsersGroup:w,selectedUnitsGroup:_,selectedEventsGroup:G}}};const ue=(0,O.Z)(re,[["render",ie]]);var de=ue;const ce={class:"flex gap-1 justify-center p-1"},pe=["onClick"],me={class:"flex gap-1 justify-center p-1"},ve=["onClick"],ge={class:"flex gap-1 justify-center p-1"},fe=["onClick"],be={class:"flex gap-1 justify-center"},we=["onClick"],_e=["onClick"];function Ge(e,t,o,a,l,s){const i=(0,n.up)("v-data-table"),r=(0,n.up)("ViewGroupsVue");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n.Wm)(i,{headers:l.headers,items:o.desserts,class:"elevation-1 text-sm rounded-lg"},{["item.cod_grupousuarios"]:(0,n.w5)((({item:e})=>[(0,n._)("div",ce,[(0,n._)("span",{onClick:t=>a.viewGroupUsers(e.cod_grupousuarios,"Grupos de usuarios")},[(0,n.Wm)(f.T,{icon:"mdi-account-multiple-outline",variant:"tonal",color:"indigo"}),(0,n.Wm)(P.N,{activator:"parent",location:"top"},{default:(0,n.w5)((()=>[(0,n.Uk)("Ver")])),_:1})],8,pe)])])),["item.cod_grupounidades"]:(0,n.w5)((({item:e})=>[(0,n._)("div",me,[(0,n._)("span",{onClick:t=>a.viewGroupUnits(e.cod_grupounidades,"Grupos de unidades")},[(0,n.Wm)(f.T,{icon:"mdi-car-multiple",variant:"tonal",color:"indigo"}),(0,n.Wm)(P.N,{activator:"parent",location:"top"},{default:(0,n.w5)((()=>[(0,n.Uk)("Ver")])),_:1})],8,ve)])])),["item.cod_grupotiposdeventos"]:(0,n.w5)((({item:e})=>[(0,n._)("div",ge,[(0,n._)("span",{onClick:t=>a.viewGroupTypeEvents(e.cod_grupotiposdeventos,"Grupos de eventos")},[(0,n.Wm)(f.T,{icon:"mdi-clipboard-text-multiple-outline",variant:"tonal",color:"indigo"}),(0,n.Wm)(P.N,{activator:"parent",location:"top"},{default:(0,n.w5)((()=>[(0,n.Uk)("Ver")])),_:1})],8,fe)])])),["item.actions"]:(0,n.w5)((({item:e})=>[(0,n._)("div",be,[(0,n._)("span",{onClick:t=>a.editItem(e)},[(0,n.Wm)(f.T,{icon:"mdi-pencil",size:"small",variant:"text",color:"green"}),(0,n.Wm)(P.N,{activator:"parent",location:"top"},{default:(0,n.w5)((()=>[(0,n.Uk)("Editar")])),_:1})],8,we),(0,n._)("span",{onClick:t=>a.deleteItem(e)},[(0,n.Wm)(f.T,{icon:"mdi-delete-empty",size:"small",variant:"text",color:"red"}),(0,n.Wm)(P.N,{activator:"parent",location:"top"},{default:(0,n.w5)((()=>[(0,n.Uk)("Eliminar")])),_:1})],8,_e)])])),_:2},1032,["headers","items"]),(0,n.Wm)(r,{nameGrupo:a.titleView,openModal:a.viewDialog,itemsView:a.listGroupsView,onCancelItem:t[0]||(t[0]=e=>a.viewDialog=!1)},null,8,["nameGrupo","openModal","itemsView"])],64)}var xe=o(5470),ye=o(4108),Ue=o(3446),he=o(6191),Ae=o(4580);const Ie={class:"px-4 w-full text-center text-blue-400 font-bold title_views"},We={class:"max-h-[6rem] container_scroll"};function Ee(e,t,o,a,l,s){return(0,n.wg)(),(0,n.j4)(G.B,{modelValue:a.dialog,"onUpdate:modelValue":t[0]||(t[0]=e=>a.dialog=e),width:"500","onClick:outside":a.cancelItem},{default:(0,n.w5)((()=>[(0,n.Wm)(b._,null,{default:(0,n.w5)((()=>[(0,n.Wm)(A.i,null,{default:(0,n.w5)((()=>[(0,n._)("span",Ie,(0,R.zw)(o.nameGrupo),1)])),_:1}),(0,n.Wm)(w.Z,null,{default:(0,n.w5)((()=>[(0,n.Wm)(x.D,{cols:"12"},{default:(0,n.w5)((()=>[(0,n.Wm)(ye.Vc,{multiple:""},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(o.itemsView,(e=>((0,n.wg)(),(0,n.j4)(Ue.M,{key:e.codigo},{default:(0,n.w5)((()=>[(0,n.Wm)(he.V,{color:"blue-grey-lighten-5"},{default:(0,n.w5)((()=>[(0,n._)("span",null,(0,R.zw)(e.nombre),1)])),_:2},1024),(0,n.Wm)(Ae.H,null,{default:(0,n.w5)((()=>[(0,n._)("div",We,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.items,(e=>((0,n.wg)(),(0,n.iD)("div",{class:"bg-blue-200 rounded-sm p-1 px-3 w-full my-1 text-sm",key:e,size:"small"},(0,R.zw)(e),1)))),128))])])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1})])),_:1}),(0,n.Wm)(_.h,null,{default:(0,n.w5)((()=>[(0,n.Wm)(y.C),(0,n.Wm)(f.T,{color:"blue-lighten-1",variant:"tonal",onClick:a.cancelItem},{default:(0,n.w5)((()=>[(0,n.Uk)(" Aceptar ")])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue","onClick:outside"])}var ke={props:{nameGrupo:String,itemsView:Array,openModal:Boolean},emits:["cancel-item"],setup(e,{emit:t}){const o=(0,V.iH)(!1);(0,n.YP)((()=>e.openModal),(e=>{o.value=e}));const a=()=>{t("cancel-item")};return{dialog:o,cancelItem:a}}};const Ce=(0,O.Z)(ke,[["render",Ee]]);var Se=Ce,Ve={props:{desserts:Array,dataGroupUnitsProps:Array,dataGroupUsersProps:Array,dataGroupEventsProps:Array},components:{VDataTable:xe.y_,ViewGroupsVue:Se},emits:["delete-item","edit-item"],data(){return{headers:[{title:"Regla",align:"start",key:"regla"},{title:"Grupo usuarios",align:"center",key:"cod_grupousuarios"},{title:"Grupo unidades",align:"center",key:"cod_grupounidades"},{title:"Grupo eventos",align:"center",key:"cod_grupotiposdeventos"},{title:"Acción",align:"center",key:"actions"}]}},setup(e,{emit:t}){const o=(0,V.iH)([]),a=(0,V.iH)([]),l=(0,V.iH)([]),s=(0,V.iH)(!1),i=(0,V.iH)([]),r=(0,V.iH)("");(0,n.bv)((async()=>{o.value=e.dataGroupUnitsProps,a.value=e.dataGroupUsersProps,l.value=e.dataGroupEventsProps})),(0,n.YP)((()=>e.dataGroupUnitsProps),(e=>{o.value=e})),(0,n.YP)((()=>e.dataGroupUsersProps),(e=>{a.value=e})),(0,n.YP)((()=>e.dataGroupEventsProps),(e=>{l.value=e}));const u=e=>{t("edit-item",{item:e})},d=e=>{t("delete-item",{item:e})},c=(e,t)=>{const o=e.map((e=>{const t=a.value.find((t=>t.codigo==e));return t}));i.value=o.map((e=>{const{usuarios:t,...o}=e;return{...o,items:t}})),r.value=t,s.value=!0},p=(e,t)=>{const n=e.map((e=>{const t=o.value.find((t=>t.codigo==e));return t}));i.value=n.map((e=>{const{unidades:t,...o}=e;return{...o,items:t}})),r.value=t,s.value=!0},m=(e,t)=>{const o=e.map((e=>{const t=l.value.find((t=>t.codigo==e));return t}));i.value=o.map((e=>{const{tiposeventos:t,...o}=e;return{...o,items:t}})),r.value=t,s.value=!0};return{listGroupsView:i,viewDialog:s,titleView:r,editItem:u,deleteItem:d,viewGroupUsers:c,viewGroupUnits:p,viewGroupTypeEvents:m}}};const He=(0,O.Z)(Ve,[["render",Ge]]);var Pe=He,Ze=o(3512),Me={components:{CreateRulesVue:oe,EditRulesVue:de,TableRulesVue:Pe},setup(){const e=(0,V.iH)([]),t=(0,V.iH)([]),o=(0,V.iH)([]),a=(0,V.iH)([]),l=(0,V.iH)({}),s=(0,V.iH)(!1);(0,n.bv)((async()=>{await i()}));const i=async()=>{const[n,l,s,i]=await Promise.all([u(S.Z.state.codcuenta,S.Z.state.codclienteAdmin),(0,m.ws)(S.Z.state.codcuenta,S.Z.state.codclienteAdmin),(0,v.Ez)(S.Z.state.codcuenta,S.Z.state.codclienteAdmin),(0,g.o$)(S.Z.state.codcuenta,S.Z.state.codclienteAdmin)]);a.value=n.data.data?n.data.data[0].reglas:[],e.value=i.data.data?i.data.data[0].grupos_unidades:[],t.value=l.data.data?l.data.data[0].grupos_usuarios:[],o.value=s.data.data?s.data.data[0].grupos_tiposdeventos:[]},r=(e,t)=>t.map((t=>{const o=e.value.find((e=>e.nombre===t));return o?o.codigo:null})).filter((e=>null!==e)),f=(e,t)=>t.map((t=>{const o=e.value.find((e=>e.codigo===t));return o?{nombre:o.nombre}:null})).filter((e=>null!==e)),b=n=>{const{regla:a,cod_grupotiposdeventos:l,cod_grupounidades:s,cod_grupousuarios:u}=n;if(""!==a&&l.length>0&&s.length>0&&u.length>0){const a=r(o,l),c=r(e,s),p=r(t,u),m={...n,cod_grupotiposdeventos:a,cod_grupounidades:c,cod_grupousuarios:p};d(m).then((()=>{(0,Ze.y)((async()=>{await i()}),"success","Logrado","Se ha creado la regla correctamente")}))}else(0,Ze.y)((()=>{}),"warning","Advertencia","Rellene todos los campos, se debe asignar al menos un grupo por cada tipo")},w=e=>{const t={codigo:e.item.codigo,cod_grupousuarios:e.item.cod_grupousuarios,cod_cuenta:S.Z.state.codcuenta,cod_cliente:S.Z.state.codclienteAdmin};(0,Ze.M)((async()=>{await p(t).then((()=>{(0,Ze.y)((async()=>{await i()}),"success","Logrado","Se ha eliminado la regla correctamente")})).catch((e=>{console.log(e),(0,Ze.y)((()=>{}),"error","Hubo un error","No se logro eliminar")}))}),"¿Estás seguro de eliminar esta regla?","Aceptar")},_=(e,t)=>e.filter((e=>!t.some((t=>t.nombre===e.nombre)))),G=n=>{const a=o.value.map((e=>({nombre:e.nombre}))),i=e.value.map((e=>({nombre:e.nombre}))),r=t.value.map((e=>({nombre:e.nombre}))),u=f(o,n.item.cod_grupotiposdeventos),d=f(e,n.item.cod_grupounidades),c=f(t,n.item.cod_grupousuarios),p=_(a,u),m=_(i,d),v=_(r,c);l.value={...n,editAssignedGroupEvents:u,editAssignedGroupUnits:d,editAssignedGroupUsers:c,editAvailableGroupEvents:p,editAvailableGroupUnits:m,editAvailableGroupUsers:v},s.value=!0},x=n=>{const{regla:a,cod_grupotiposdeventos:l,cod_grupounidades:s,cod_grupousuarios:u}=n;if(""!==a&&l.length>0&&s.length>0&&u.length>0){const a=r(o,l),d=r(e,s),p=r(t,u),m={...n,cod_grupotiposdeventos:a,cod_grupounidades:d,cod_grupousuarios:p};c(m).then((()=>{(0,Ze.y)((async()=>{await i()}),"success","Logrado","Se ha editado la regla correctamente")})).catch((e=>{console.log(e),(0,Ze.y)((()=>{}),"error","Hubo un error","No se logro editar la regla")}))}else(0,Ze.y)((()=>{}),"warning","Advertencia","Rellene todos los campos, se debe asignar al menos un grupo por cada tipo")};return{dataGroupUnits:e,dataGroupUsers:t,dataGroupEvents:o,listRulesData:a,editDialog:s,editItem:l,onUpdateItem:x,onDeleteItem:w,onCreateItem:b,onEditItem:G}}};const Te=(0,O.Z)(Me,[["render",s]]);var De=Te},3446:function(e,t,o){o.d(t,{M:function(){return G}});o(560);var n=o(3396),a=o(4108),l=o(4580),s=o(6191),i=o(2370),r=o(9166),u=o(6107),d=o(2465),c=o(1970),p=o(1136),m=o(4231),v=o(1138),g=o(4870),f=o(3766),b=o(1107),w=o(9888);const _=(0,f.U)({title:String,text:String,bgColor:String,...(0,r.l)(),...(0,d.c)(),...(0,c.YQ)(),...(0,p.H)(),...(0,m.I)(),...(0,v.Q)(),...(0,s.w)()},"VExpansionPanel"),G=(0,b.ev)()({name:"VExpansionPanel",props:_(),emits:{"group:selected":e=>!0},setup(e,t){let{slots:o}=t;const r=(0,c.Yt)(e,a.jS),{backgroundColorClasses:p,backgroundColorStyles:v}=(0,i.Y5)(e,"bgColor"),{elevationClasses:f}=(0,d.Y)(e),{roundedClasses:b}=(0,m.b)(e),_=(0,n.Fl)((()=>r?.disabled.value||e.disabled)),G=(0,n.Fl)((()=>r.group.items.value.reduce(((e,t,o)=>(r.group.selected.value.includes(t.id)&&e.push(o),e)),[]))),x=(0,n.Fl)((()=>{const e=r.group.items.value.findIndex((e=>e.id===r.id));return!r.isSelected.value&&G.value.some((t=>t-e===1))})),y=(0,n.Fl)((()=>{const e=r.group.items.value.findIndex((e=>e.id===r.id));return!r.isSelected.value&&G.value.some((t=>t-e===-1))}));return(0,n.JJ)(a.jS,r),(0,u.AF)({VExpansionPanelText:{eager:(0,g.Vh)(e,"eager")}}),(0,w.L)((()=>{const t=!(!o.text&&!e.text),a=!(!o.title&&!e.title);return(0,n.Wm)(e.tag,{class:["v-expansion-panel",{"v-expansion-panel--active":r.isSelected.value,"v-expansion-panel--before-active":x.value,"v-expansion-panel--after-active":y.value,"v-expansion-panel--disabled":_.value},b.value,p.value,e.class],style:[v.value,e.style]},{default:()=>[(0,n.Wm)("div",{class:["v-expansion-panel__shadow",...f.value]},null),a&&(0,n.Wm)(s.V,{key:"title",collapseIcon:e.collapseIcon,color:e.color,expandIcon:e.expandIcon,hideActions:e.hideActions,ripple:e.ripple},{default:()=>[o.title?o.title():e.title]}),t&&(0,n.Wm)(l.H,{key:"text"},{default:()=>[o.text?o.text():e.text]}),o.default?.()]})})),{}}})},4580:function(e,t,o){o.d(t,{H:function(){return m}});var n=o(3396),a=o(9242),l=o(4108),s=o(8952),i=o(9166),r=o(1136),u=o(3766),d=o(1107),c=o(9888);const p=(0,u.U)({...(0,i.l)(),...(0,r.H)()},"VExpansionPanelText"),m=(0,d.ev)()({name:"VExpansionPanelText",props:p(),setup(e,t){let{slots:o}=t;const i=(0,n.f3)(l.jS);if(!i)throw new Error("[Vuetify] v-expansion-panel-text needs to be placed inside v-expansion-panel");const{hasContent:u,onAfterLeave:d}=(0,r.l)(e,i.isSelected);return(0,c.L)((()=>(0,n.Wm)(s.Fx,{onAfterLeave:d},{default:()=>[(0,n.wy)((0,n.Wm)("div",{class:["v-expansion-panel-text",e.class],style:e.style},[o.default&&u.value&&(0,n.Wm)("div",{class:"v-expansion-panel-text__wrapper"},[o.default?.()])]),[[a.F8,i.isSelected.value]])]}))),{}}})},6191:function(e,t,o){o.d(t,{V:function(){return v},w:function(){return m}});var n=o(3396),a=o(4108),l=o(3289),s=o(2370),i=o(9166),r=o(4960),u=o(3824),d=o(3766),c=o(1107),p=o(9888);const m=(0,d.U)({color:String,expandIcon:{type:r.lE,default:"$expand"},collapseIcon:{type:r.lE,default:"$collapse"},hideActions:Boolean,ripple:{type:[Boolean,Object],default:!1},readonly:Boolean,...(0,i.l)()},"VExpansionPanelTitle"),v=(0,c.ev)()({name:"VExpansionPanelTitle",directives:{Ripple:u.H},props:m(),setup(e,t){let{slots:o}=t;const i=(0,n.f3)(a.jS);if(!i)throw new Error("[Vuetify] v-expansion-panel-title needs to be placed inside v-expansion-panel");const{backgroundColorClasses:r,backgroundColorStyles:u}=(0,s.Y5)(e,"color"),d=(0,n.Fl)((()=>({collapseIcon:e.collapseIcon,disabled:i.disabled.value,expanded:i.isSelected.value,expandIcon:e.expandIcon,readonly:e.readonly})));return(0,p.L)((()=>(0,n.wy)((0,n.Wm)("button",{class:["v-expansion-panel-title",{"v-expansion-panel-title--active":i.isSelected.value},r.value,e.class],style:[u.value,e.style],type:"button",tabindex:i.disabled.value?-1:void 0,disabled:i.disabled.value,"aria-expanded":i.isSelected.value,onClick:e.readonly?void 0:i.toggle},[(0,n.Wm)("span",{class:"v-expansion-panel-title__overlay"},null),o.default?.(d.value),!e.hideActions&&(0,n.Wm)("span",{class:"v-expansion-panel-title__icon"},[o.actions?o.actions(d.value):(0,n.Wm)(l.t,{icon:i.isSelected.value?e.collapseIcon:e.expandIcon},null)])]),[[(0,n.Q2)("ripple"),e.ripple]]))),{}}})},4108:function(e,t,o){o.d(t,{jS:function(){return m},Vc:function(){return f}});var n=o(3396),a=o(9166),l=o(6107),s=o(1970),i=o(1138),r=o(5935),u=o(4870),d=o(3766),c=o(1107),p=o(9888);const m=Symbol.for("vuetify:v-expansion-panel"),v=["default","accordion","inset","popout"],g=(0,d.U)({color:String,variant:{type:String,default:"default",validator:e=>v.includes(e)},readonly:Boolean,...(0,a.l)(),...(0,s.k4)(),...(0,i.Q)(),...(0,r.x$)()},"VExpansionPanels"),f=(0,c.ev)()({name:"VExpansionPanels",props:g(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:o}=t;(0,s._v)(e,m);const{themeClasses:a}=(0,r.ER)(e),i=(0,n.Fl)((()=>e.variant&&`v-expansion-panels--variant-${e.variant}`));return(0,l.AF)({VExpansionPanel:{color:(0,u.Vh)(e,"color")},VExpansionPanelTitle:{readonly:(0,u.Vh)(e,"readonly")}}),(0,p.L)((()=>(0,n.Wm)(e.tag,{class:["v-expansion-panels",a.value,i.value,e.class],style:e.style},o))),{}}})}}]);
//# sourceMappingURL=406.d3673111.js.map