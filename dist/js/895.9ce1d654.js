"use strict";(self["webpackChunkplatform_monitors4"]=self["webpackChunkplatform_monitors4"]||[]).push([[895],{8099:function(){},5090:function(e,t,o){o.d(t,{A3:function(){return i},DN:function(){return s},Ez:function(){return n},vQ:function(){return r}});var l=o(1076);const a="http://192.168.1.45:3000/api/v1";function n(e,t){return l.Z.post(`${a}/allGroupsEventtypes`,{cod_cuenta:e,cod_cliente:t})}function s(e){return l.Z.post(`${a}/createGroupEventtypes`,e)}function i(e){return l.Z.post(`${a}/deleteGroupEventtypes`,e)}function r(e){return l.Z.post(`${a}/editGroupsEventtypes`,e)}},3031:function(e,t,o){o.d(t,{Ub:function(){return i},XX:function(){return s},lE:function(){return r},o$:function(){return n}});var l=o(1076);const a="http://192.168.1.45:3000/api/v1";function n(e,t){return l.Z.post(`${a}/allGroupsUnits`,{cod_cuenta:e,cod_cliente:t})}function s(e){return l.Z.post(`${a}/createGroupUnits`,e)}function i(e){return l.Z.post(`${a}/deleteGroupUnits`,e)}function r(e){return l.Z.post(`${a}/editGroupsUnits`,e)}},1329:function(e,t,o){o.d(t,{O1:function(){return s},Ow:function(){return i},el:function(){return r},ws:function(){return n}});var l=o(1076);const a="http://192.168.1.45:3000/api/v1";function n(e,t){return l.Z.post(`${a}/allGroupsUsers`,{cod_cuenta:e,cod_cliente:t})}function s(e){return l.Z.post(`${a}/createGroupUsers`,e)}function i(e){return l.Z.post(`${a}/deleteGroupUsers`,e)}function r(e){return l.Z.post(`${a}/editGroupsUsers`,e)}},3512:function(e,t,o){o.d(t,{M:function(){return s},y:function(){return n}});var l=o(2492),a=o.n(l);function n(e,t,o,l){a().fire({icon:t,html:`<p class="text-lg font-semibold">${o}</p>\n          <p class="text-base">${l}</p>`,showCancelButton:!1,confirmButtonText:"Aceptar",confirmButtonColor:"#006cac",reverseButtons:!0}).then((t=>{t.isConfirmed&&e()}))}function s(e,t,o){a().fire({icon:"question",html:`<p class="text-lg">${t}</p>`,showCancelButton:!0,reverseButtons:!0,confirmButtonText:o,confirmButtonColor:"#3b82f6",cancelButtonText:"Cancelar"}).then((t=>{t.isConfirmed&&e()}))}},1895:function(e,t,o){o.r(t),o.d(t,{default:function(){return Me}});var l=o(3396);const a={class:"flex justify-between w-full"},n=(0,l._)("div",null,[(0,l._)("h1",{class:"font-bold text-xl title_poppins pb-5"},"Reglas")],-1);function s(e,t,o,s,i,r){const u=(0,l.up)("CreateRulesVue"),d=(0,l.up)("TableRulesVue"),c=(0,l.up)("EditRulesVue");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("div",null,[(0,l._)("div",a,[n,(0,l.Wm)(u,{onCreateItem:s.onCreateItem,dataGroupUnitsProps:s.dataGroupUnits,dataGroupUsersProps:s.dataGroupUsers,dataGroupEventsProps:s.dataGroupEvents},null,8,["onCreateItem","dataGroupUnitsProps","dataGroupUsersProps","dataGroupEventsProps"])]),(0,l.Wm)(d,{desserts:s.listRulesData,dataGroupUnitsProps:s.dataGroupUnits,dataGroupUsersProps:s.dataGroupUsers,dataGroupEventsProps:s.dataGroupEvents,onDeleteItem:s.onDeleteItem,onEditItem:s.onEditItem},null,8,["desserts","dataGroupUnitsProps","dataGroupUsersProps","dataGroupEventsProps","onDeleteItem","onEditItem"])]),(0,l.Wm)(c,{openModal:s.editDialog,itemEdit:s.editItem,onCancelItem:t[0]||(t[0]=e=>s.editDialog=!1),onEditItem:s.onUpdateItem},null,8,["openModal","itemEdit","onEditItem"])],64)}var i=o(1076);const r="http://192.168.1.45:3000/api/v1";function u(e,t){return i.Z.post(`${r}/allRoules`,{cod_cuenta:e,cod_cliente:t})}function d(e){return i.Z.post(`${r}/createRoules`,e)}function c(e){return i.Z.post(`${r}/editRoules`,e)}function p(e){return i.Z.post(`${r}/deleteRoules`,e)}var m=o(1329),v=o(5090),g=o(3031),f=o(7312),b=o(5039),_=o(1888),w=o(1334),y=o(3601),x=o(8521),G=o(9234),h=o(3289),U=o(165),W=o(1328);const k=(0,l._)("span",{class:"px-4 w-full text-center text-blue-400 font-bold title_views"},"Crear regla",-1),C=(0,l._)("div",{class:"w-full bg-blue-400 text-white rounded-sm py-1 px-3 my-2 text-center text-sm"},"Grupos de usuarios ",-1),S=(0,l._)("div",{class:"w-full bg-blue-400 text-white rounded-sm py-1 px-3 my-2 text-center text-sm"},"Grupos de unidades ",-1),V=(0,l._)("div",{class:"w-full bg-blue-400 text-white rounded-sm py-1 px-3 my-2 text-center text-sm"},"Grupos de eventos ",-1);function I(e,t,o,a,n,s){const i=(0,l.up)("SelectGroups");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)(f.T,{size:"small",color:"blue",onClick:t[0]||(t[0]=e=>a.dialog=!0)},{default:(0,l.w5)((()=>[(0,l.Wm)(h.t,{icon:"mdi-plus"}),(0,l.Uk)(" Crear Nuevo")])),_:1}),(0,l.Wm)(y.B,{modelValue:a.dialog,"onUpdate:modelValue":t[2]||(t[2]=e=>a.dialog=e),width:"680","onClick:outside":a.cancelItem},{default:(0,l.w5)((()=>[(0,l.Wm)(b._,null,{default:(0,l.w5)((()=>[(0,l.Wm)(W.i,null,{default:(0,l.w5)((()=>[k])),_:1}),(0,l.Wm)(_.Z,null,{default:(0,l.w5)((()=>[(0,l.Wm)(x.D,{cols:"12"},{default:(0,l.w5)((()=>[(0,l.Wm)(U.h,{variant:"outlined",label:"Nombre","prepend-inner-icon":"mdi-form-textbox",color:"indigo",modelValue:a.name,"onUpdate:modelValue":t[1]||(t[1]=e=>a.name=e),"hide-details":""},null,8,["modelValue"]),C,(0,l.Wm)(i,{assigned:a.assignedUsers,available:a.dataGroupUsers,isMobile:a.isMobile,onSelectedGroups:a.selectedUsersGroup},null,8,["assigned","available","isMobile","onSelectedGroups"]),S,(0,l.Wm)(i,{assigned:a.assignedUnits,available:a.dataGroupUnits,isMobile:a.isMobile,onSelectedGroups:a.selectedUnitsGroup},null,8,["assigned","available","isMobile","onSelectedGroups"]),V,(0,l.Wm)(i,{assigned:a.assignedEvents,available:a.dataGroupEvents,isMobile:a.isMobile,onSelectedGroups:a.selectedEventsGroup},null,8,["assigned","available","isMobile","onSelectedGroups"])])),_:1})])),_:1}),(0,l.Wm)(w.h,null,{default:(0,l.w5)((()=>[(0,l.Wm)(G.C),(0,l.Wm)(f.T,{color:"blue-grey-lighten-2",variant:"tonal",onClick:a.cancelItem},{default:(0,l.w5)((()=>[(0,l.Uk)(" Cancelar ")])),_:1},8,["onClick"]),(0,l.Wm)(f.T,{color:"blue-lighten-1",variant:"tonal",onClick:a.createItem},{default:(0,l.w5)((()=>[(0,l.Uk)(" Aceptar ")])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue","onClick:outside"])],64)}var A=o(4239),E=o(4870),H=o(9242),P=o(678);const T={class:"w-full block lg:flex gap-1 items-center"},Z={class:"w-full"},M={class:"flex justify-center lg:block"},$={class:"my-1"},B={class:"my-1"},D={class:"w-full"};function Y(e,t,o,a,n,s){const i=(0,l.up)("SelectItemsAndMoveVue");return(0,l.wg)(),(0,l.iD)("div",T,[(0,l._)("div",Z,[(0,l.Wm)(f.T,{density:"compact",class:"w-full mb-2 text-none",color:"blue-lighten-1",variant:"tonal"},{default:(0,l.w5)((()=>[(0,l.Uk)(" DISPONIBLES ")])),_:1}),(0,l.Wm)(i,{listGroups:a.itemsAvailable,onListSeleccionados:a.emitSelectedItemsAvailable},null,8,["listGroups","onListSeleccionados"])]),(0,l._)("div",M,[(0,l._)("div",$,[(0,l.Wm)(f.T,{icon:o.isMobile?"mdi-arrow-down":"mdi-arrow-right",variant:"tonal",size:"small",color:"indigo",onClick:(0,H.iM)(a.moveSelectedItemsToAssigned,["prevent"])},null,8,["icon","onClick"]),(0,l.Wm)(P.N,{activator:"parent",location:"top"},{default:(0,l.w5)((()=>[(0,l.Uk)("Agregar")])),_:1})]),(0,l._)("div",B,[(0,l.Wm)(f.T,{icon:o.isMobile?"mdi-arrow-up":"mdi-arrow-left",variant:"tonal",size:"small",color:"indigo",onClick:(0,H.iM)(a.moveSelectedItemsToAvailable,["prevent"])},null,8,["icon","onClick"]),(0,l.Wm)(P.N,{activator:"parent",location:"top"},{default:(0,l.w5)((()=>[(0,l.Uk)("Quitar")])),_:1})])]),(0,l._)("div",D,[(0,l.Wm)(f.T,{density:"compact",class:"w-full mb-2 text-none",color:"blue-lighten-1",variant:"tonal"},{default:(0,l.w5)((()=>[(0,l.Uk)(" ASIGNADOS ")])),_:1}),(0,l.Wm)(i,{listGroups:a.itemsAssigned,onListSeleccionados:a.emitSelectedItemsAssigned},null,8,["listGroups","onListSeleccionados"])])])}o(560);var N=o(7139);const F={class:"w-full"},L={class:"w-full rounded h-[8rem] overflow-y-auto p-2 border container_scroll",id:"grupos-disponibles"},j=["onClick"];function R(e,t,o,a,n,s){return(0,l.wg)(),(0,l.iD)("div",F,[(0,l._)("div",L,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(a.listGroupsInitial,(e=>((0,l.wg)(),(0,l.iD)("p",{key:e.nombre,class:(0,N.C_)(["p-1 pl-2 text-sm my-1 ease-in duration-100 cursor-pointer rounded-sm",{"bg-blue-200":a.selectedItems.includes(e.nombre),"bg-gray-200 hover:bg-gray-300":!a.selectedItems.includes(e.nombre)}]),onClick:t=>a.toggleSelection(e.nombre,t)},(0,N.zw)(a.truncateText(e.nombre)),11,j)))),128))])])}var z={props:{listGroups:Array},emits:["list-seleccionados"],setup(e,{emit:t}){const o=(0,E.iH)(e.listGroups),a=(0,E.iH)([]);(0,l.YP)((()=>e.listGroups),(e=>{o.value=e})),(0,l.YP)((()=>a.value),(e=>{t("list-seleccionados",e)}));const n=(e,o)=>{const l=a.value.indexOf(e);l>-1?a.value.splice(l,1):(o.ctrlKey||o.metaKey?a.value.push(e):a.value=[e],t("list-seleccionados",a.value))},s=()=>{a.value=o.value.map((e=>e.nombre))},i=e=>e&&e.length>25?e.slice(0,25)+"...":e;return{selectedItems:a,listGroupsInitial:o,toggleSelectionAll:s,toggleSelection:n,truncateText:i}}},O=o(89);const Q=(0,O.Z)(z,[["render",R]]);var K=Q,J={props:{isMobile:Boolean,assigned:Array,available:Array},components:{SelectItemsAndMoveVue:K},emits:["selected-groups"],setup(e,{emit:t}){const o=(0,E.iH)([]),a=(0,E.iH)([]),n=(0,E.iH)([]),s=(0,E.iH)([]);(0,l.bv)((()=>{n.value=e.assigned,s.value=e.available})),(0,l.YP)((()=>e.assigned),(t=>{n.value=t,s.value=e.available})),(0,l.YP)((()=>e.available),(t=>{s.value=t,n.value=e.assigned}));const i=e=>{a.value=e},r=e=>{o.value=e},u=()=>{if(0!=o.value.length){const e=o.value.map((e=>({nombre:e})));n.value.push(...e),s.value=s.value.filter((t=>-1===e.findIndex((e=>e.nombre===t.nombre))))}},d=()=>{if(0!=a.value.length){const e=a.value.map((e=>({nombre:e})));s.value.push(...e),n.value=n.value.filter((t=>-1===e.findIndex((e=>e.nombre===t.nombre))))}};return(0,l.YP)((()=>n.value),(e=>{t("selected-groups",{itemsAssigned:e,itemsAvailable:s.value})})),(0,l.YP)((()=>s.value),(e=>{t("selected-groups",{itemsAssigned:n.value,itemsAvailable:e})})),{selectedItemsAvailable:o,selectedItemsAssigned:a,itemsAssigned:n,itemsAvailable:s,emitSelectedItemsAssigned:i,emitSelectedItemsAvailable:r,moveSelectedItemsToAssigned:u,moveSelectedItemsToAvailable:d}}};const X=(0,O.Z)(J,[["render",Y]]);var q=X,ee={props:{dataGroupUnitsProps:Array,dataGroupUsersProps:Array,dataGroupEventsProps:Array},components:{SelectGroups:q},emits:["create-item"],setup(e,{emit:t}){const o=(0,E.iH)(!1),a=(0,E.iH)(""),n=(0,E.iH)(!1),s=(0,E.iH)([]),i=(0,E.iH)([]),r=(0,E.iH)([]),u=(0,E.iH)([]),d=(0,E.iH)([]),c=(0,E.iH)([]),p=(0,E.iH)([]),m=(0,E.iH)([]),v=(0,E.iH)([]);(0,l.YP)((()=>o.value),(e=>{1==e&&(g(),window.addEventListener("resize",g))})),(0,l.YP)((()=>e.dataGroupUnitsProps),(e=>{s.value=e.map((e=>({nombre:e.nombre})))})),(0,l.YP)((()=>e.dataGroupUsersProps),(e=>{i.value=e.map((e=>({nombre:e.nombre})))})),(0,l.YP)((()=>e.dataGroupEventsProps),(e=>{r.value=e.map((e=>({nombre:e.nombre})))}));const g=()=>{n.value=window.innerWidth<=500},f=()=>{t("create-item",{cod_cuenta:A.Z.state.codcuenta,cod_cliente:A.Z.state.codclienteAdmin,empresa:A.Z.state.empresa,regla:a.value,cod_grupotiposdeventos:c.value,cod_grupounidades:u.value,cod_grupousuarios:d.value}),b()},b=()=>{a.value="",p.value=[],m.value=[],v.value=[],o.value=!1},_=e=>{d.value=e.itemsAssigned.map((e=>e.nombre))},w=e=>{u.value=e.itemsAssigned.map((e=>e.nombre))},y=e=>{c.value=e.itemsAssigned.map((e=>e.nombre))};return{assignedEvents:v,assignedUnits:m,assignedUsers:p,dataGroupUnits:s,dataGroupUsers:i,dataGroupEvents:r,dialog:o,name:a,isMobile:n,createItem:f,cancelItem:b,selectedUsersGroup:_,selectedUnitsGroup:w,selectedEventsGroup:y}}};const te=(0,O.Z)(ee,[["render",I]]);var oe=te;const le=(0,l._)("span",{class:"px-4 w-full text-center text-blue-400 font-bold title_views"},"Editar regla",-1),ae=(0,l._)("div",{class:"w-full bg-blue-400 text-white rounded-sm py-1 px-3 my-2 text-center text-sm"},"Grupos de unidades ",-1),ne=(0,l._)("div",{class:"w-full bg-blue-400 text-white rounded-sm py-1 px-3 my-2 text-center text-sm"},"Grupos de eventos ",-1);function se(e,t,o,a,n,s){const i=(0,l.up)("SelectGroups");return(0,l.wg)(),(0,l.j4)(y.B,{modelValue:a.dialog,"onUpdate:modelValue":t[1]||(t[1]=e=>a.dialog=e),width:"680","onClick:outside":a.cancelItem},{default:(0,l.w5)((()=>[(0,l.Wm)(b._,null,{default:(0,l.w5)((()=>[(0,l.Wm)(W.i,null,{default:(0,l.w5)((()=>[le])),_:1}),(0,l.Wm)(_.Z,null,{default:(0,l.w5)((()=>[(0,l.Wm)(x.D,{cols:"12"},{default:(0,l.w5)((()=>[(0,l.Wm)(U.h,{variant:"outlined",label:"Nombre","prepend-inner-icon":"mdi-form-textbox",color:"indigo",modelValue:a.name,"onUpdate:modelValue":t[0]||(t[0]=e=>a.name=e),"hide-details":""},null,8,["modelValue"]),ae,(0,l.Wm)(i,{assigned:a.assignedUnits,available:a.dataGroupUnits,isMobile:a.isMobile,onSelectedGroups:a.selectedUnitsGroup},null,8,["assigned","available","isMobile","onSelectedGroups"]),ne,(0,l.Wm)(i,{assigned:a.assignedEvents,available:a.dataGroupEvents,isMobile:a.isMobile,onSelectedGroups:a.selectedEventsGroup},null,8,["assigned","available","isMobile","onSelectedGroups"])])),_:1})])),_:1}),(0,l.Wm)(w.h,null,{default:(0,l.w5)((()=>[(0,l.Wm)(G.C),(0,l.Wm)(f.T,{color:"blue-grey-lighten-2",variant:"tonal",onClick:a.cancelItem},{default:(0,l.w5)((()=>[(0,l.Uk)(" Cancelar ")])),_:1},8,["onClick"]),(0,l.Wm)(f.T,{color:"blue-lighten-1",variant:"tonal",onClick:a.editItem},{default:(0,l.w5)((()=>[(0,l.Uk)(" Aceptar ")])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue","onClick:outside"])}var ie={props:{itemEdit:Object,openModal:Boolean},components:{SelectGroups:q},emits:["edit-item","cancel-item"],setup(e,{emit:t}){const o=(0,E.iH)(!1),a=(0,E.iH)(""),n=(0,E.iH)(!1),s=(0,E.iH)([]),i=(0,E.iH)([]),r=(0,E.iH)([]),u=(0,E.iH)([]),d=(0,E.iH)([]),c=(0,E.iH)([]);(0,l.YP)((()=>e.openModal),(e=>{o.value=e,1==e&&(p(),window.addEventListener("resize",p))})),(0,l.YP)((()=>e.itemEdit),(e=>{0!==Object.keys(e).length&&(a.value=e.item.regla,s.value=e.editAvailableGroupUnits,i.value=e.editAvailableGroupEvents,d.value=e.editAssignedGroupUnits,c.value=e.editAssignedGroupEvents)}));const p=()=>{n.value=window.innerWidth<=500},m=()=>{t("edit-item",{cod_cuenta:A.Z.state.codcuenta,cod_cliente:A.Z.state.codclienteAdmin,regla:a.value,codigo:e.itemEdit.item.codigo,cod_grupotiposdeventos:u.value,cod_grupounidades:r.value,cod_grupousuarios:e.itemEdit.item.cod_grupousuarios}),v()},v=()=>{a.value="",d.value=c.value=[],t("cancel-item")},g=e=>{r.value=e.itemsAssigned.map((e=>e.nombre))},f=e=>{u.value=e.itemsAssigned.map((e=>e.nombre))};return{dialog:o,name:a,isMobile:n,assignedEvents:c,assignedUnits:d,dataGroupUnits:s,dataGroupEvents:i,editItem:m,cancelItem:v,selectedUnitsGroup:g,selectedEventsGroup:f}}};const re=(0,O.Z)(ie,[["render",se]]);var ue=re;const de={class:"flex gap-1 justify-center p-1"},ce=["onClick"],pe={class:"flex gap-1 justify-center p-1"},me=["onClick"],ve={class:"flex gap-1 justify-center p-1"},ge=["onClick"],fe={class:"flex gap-1 justify-center"},be=["onClick"],_e=["onClick"];function we(e,t,o,a,n,s){const i=(0,l.up)("v-data-table"),r=(0,l.up)("ViewGroupsVue");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)(i,{headers:n.headers,items:o.desserts,class:"elevation-1 text-sm rounded-lg"},{["item.cod_grupousuarios"]:(0,l.w5)((({item:e})=>[(0,l._)("div",de,[(0,l._)("span",{onClick:t=>a.viewGroupUsers(e.cod_grupousuarios,"Grupos de usuarios")},[(0,l.Wm)(f.T,{icon:"mdi-account-multiple-outline",variant:"tonal",color:"indigo"}),(0,l.Wm)(P.N,{activator:"parent",location:"top"},{default:(0,l.w5)((()=>[(0,l.Uk)("Ver")])),_:1})],8,ce)])])),["item.cod_grupounidades"]:(0,l.w5)((({item:e})=>[(0,l._)("div",pe,[(0,l._)("span",{onClick:t=>a.viewGroupUnits(e.cod_grupounidades,"Grupos de unidades")},[(0,l.Wm)(f.T,{icon:"mdi-car-multiple",variant:"tonal",color:"indigo"}),(0,l.Wm)(P.N,{activator:"parent",location:"top"},{default:(0,l.w5)((()=>[(0,l.Uk)("Ver")])),_:1})],8,me)])])),["item.cod_grupotiposdeventos"]:(0,l.w5)((({item:e})=>[(0,l._)("div",ve,[(0,l._)("span",{onClick:t=>a.viewGroupTypeEvents(e.cod_grupotiposdeventos,"Grupos de eventos")},[(0,l.Wm)(f.T,{icon:"mdi-clipboard-text-multiple-outline",variant:"tonal",color:"indigo"}),(0,l.Wm)(P.N,{activator:"parent",location:"top"},{default:(0,l.w5)((()=>[(0,l.Uk)("Ver")])),_:1})],8,ge)])])),["item.actions"]:(0,l.w5)((({item:e})=>[(0,l._)("div",fe,[(0,l._)("span",{onClick:t=>a.editItem(e)},[(0,l.Wm)(f.T,{icon:"mdi-pencil",size:"small",variant:"text",color:"green"}),(0,l.Wm)(P.N,{activator:"parent",location:"top"},{default:(0,l.w5)((()=>[(0,l.Uk)("Editar")])),_:1})],8,be),(0,l._)("span",{onClick:t=>a.deleteItem(e)},[(0,l.Wm)(f.T,{icon:"mdi-delete-empty",size:"small",variant:"text",color:"red"}),(0,l.Wm)(P.N,{activator:"parent",location:"top"},{default:(0,l.w5)((()=>[(0,l.Uk)("Eliminar")])),_:1})],8,_e)])])),_:2},1032,["headers","items"]),(0,l.Wm)(r,{nameGrupo:a.titleView,openModal:a.viewDialog,itemsView:a.listGroupsView,onCancelItem:t[0]||(t[0]=e=>a.viewDialog=!1)},null,8,["nameGrupo","openModal","itemsView"])],64)}var ye=o(5470),xe=o(4108),Ge=o(3446),he=o(6191),Ue=o(4580);const We={class:"px-4 w-full text-center text-blue-400 font-bold title_views"},ke={class:"max-h-[7rem] overflow-y-auto container_scroll"};function Ce(e,t,o,a,n,s){return(0,l.wg)(),(0,l.j4)(y.B,{modelValue:a.dialog,"onUpdate:modelValue":t[0]||(t[0]=e=>a.dialog=e),width:"500","onClick:outside":a.cancelItem},{default:(0,l.w5)((()=>[(0,l.Wm)(b._,null,{default:(0,l.w5)((()=>[(0,l.Wm)(W.i,null,{default:(0,l.w5)((()=>[(0,l._)("span",We,(0,N.zw)(o.nameGrupo),1)])),_:1}),(0,l.Wm)(_.Z,null,{default:(0,l.w5)((()=>[(0,l.Wm)(x.D,{cols:"12"},{default:(0,l.w5)((()=>[(0,l.Wm)(xe.Vc,{multiple:""},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(o.itemsView,(e=>((0,l.wg)(),(0,l.j4)(Ge.M,{key:e.codigo},{default:(0,l.w5)((()=>[(0,l.Wm)(he.V,{color:"blue-grey-lighten-5"},{default:(0,l.w5)((()=>[(0,l._)("span",null,(0,N.zw)(e.nombre),1)])),_:2},1024),(0,l.Wm)(Ue.H,null,{default:(0,l.w5)((()=>[(0,l._)("div",ke,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.items,(e=>((0,l.wg)(),(0,l.iD)("div",{class:"bg-blue-200 rounded-sm p-1 px-3 w-full my-1 text-sm",key:e,size:"small"},(0,N.zw)(e),1)))),128))])])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1})])),_:1}),(0,l.Wm)(w.h,null,{default:(0,l.w5)((()=>[(0,l.Wm)(G.C),(0,l.Wm)(f.T,{color:"blue-lighten-1",variant:"tonal",onClick:a.cancelItem},{default:(0,l.w5)((()=>[(0,l.Uk)(" Aceptar ")])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue","onClick:outside"])}var Se={props:{nameGrupo:String,itemsView:Array,openModal:Boolean},emits:["cancel-item"],setup(e,{emit:t}){const o=(0,E.iH)(!1);(0,l.YP)((()=>e.openModal),(e=>{o.value=e}));const a=()=>{t("cancel-item")};return{dialog:o,cancelItem:a}}};const Ve=(0,O.Z)(Se,[["render",Ce]]);var Ie=Ve,Ae={props:{desserts:Array,dataGroupUnitsProps:Array,dataGroupUsersProps:Array,dataGroupEventsProps:Array},components:{VDataTable:ye.y_,ViewGroupsVue:Ie},emits:["delete-item","edit-item"],data(){return{headers:[{title:"Regla",align:"start",key:"regla"},{title:"Grupo usuarios",align:"center",key:"cod_grupousuarios"},{title:"Grupo unidades",align:"center",key:"cod_grupounidades"},{title:"Grupo eventos",align:"center",key:"cod_grupotiposdeventos"},{title:"Acción",align:"center",key:"actions"}]}},setup(e,{emit:t}){const o=(0,E.iH)([]),a=(0,E.iH)([]),n=(0,E.iH)([]),s=(0,E.iH)(!1),i=(0,E.iH)([]),r=(0,E.iH)("");(0,l.bv)((async()=>{o.value=e.dataGroupUnitsProps,a.value=e.dataGroupUsersProps,n.value=e.dataGroupEventsProps})),(0,l.YP)((()=>e.dataGroupUnitsProps),(e=>{o.value=e})),(0,l.YP)((()=>e.dataGroupUsersProps),(e=>{a.value=e})),(0,l.YP)((()=>e.dataGroupEventsProps),(e=>{n.value=e}));const u=e=>{t("edit-item",{item:e})},d=e=>{t("delete-item",{item:e})},c=(e,t)=>{const o=e.map((e=>{const t=a.value.find((t=>t.codigo==e));return t}));i.value=o.map((e=>{const{usuarios:t,...o}=e;return{...o,items:t}})),r.value=t,s.value=!0},p=(e,t)=>{const l=e.map((e=>{const t=o.value.find((t=>t.codigo==e));return t}));i.value=l.map((e=>{const{unidades:t,...o}=e;return{...o,items:t}})),r.value=t,s.value=!0},m=(e,t)=>{const o=e.map((e=>{const t=n.value.find((t=>t.codigo==e));return t}));i.value=o.map((e=>{const{tiposeventos:t,...o}=e;return{...o,items:t}})),r.value=t,s.value=!0};return{listGroupsView:i,viewDialog:s,titleView:r,editItem:u,deleteItem:d,viewGroupUsers:c,viewGroupUnits:p,viewGroupTypeEvents:m}}};const Ee=(0,O.Z)(Ae,[["render",we]]);var He=Ee,Pe=o(3512),Te={components:{CreateRulesVue:oe,EditRulesVue:ue,TableRulesVue:He},setup(){const e=(0,E.iH)([]),t=(0,E.iH)([]),o=(0,E.iH)([]),a=(0,E.iH)([]),n=(0,E.iH)({}),s=(0,E.iH)(!1);(0,l.bv)((async()=>{await i()}));const i=async()=>{const[l,n,s,i]=await Promise.all([u(A.Z.state.codcuenta,A.Z.state.codclienteAdmin),(0,m.ws)(A.Z.state.codcuenta,A.Z.state.codclienteAdmin),(0,v.Ez)(A.Z.state.codcuenta,A.Z.state.codclienteAdmin),(0,g.o$)(A.Z.state.codcuenta,A.Z.state.codclienteAdmin)]);a.value=l.data.data?l.data.data[0].reglas:[],e.value=i.data.data?i.data.data[0].grupos_unidades:[],t.value=n.data.data?n.data.data[0].grupos_usuarios:[],o.value=s.data.data?s.data.data[0].grupos_tiposdeventos:[]},r=(e,t)=>t.map((t=>{const o=e.value.find((e=>e.nombre===t));return o?o.codigo:null})).filter((e=>null!==e)),f=(e,t)=>t.map((t=>{const o=e.value.find((e=>e.codigo===t));return o?{nombre:o.nombre}:null})).filter((e=>null!==e)),b=l=>{const{regla:a,cod_grupotiposdeventos:n,cod_grupounidades:s,cod_grupousuarios:u}=l;if(""!==a&&n.length>0&&s.length>0&&u.length>0){const a=r(o,n),c=r(e,s),p=r(t,u),m={...l,cod_grupotiposdeventos:a,cod_grupounidades:c,cod_grupousuarios:p};d(m).then((()=>{(0,Pe.y)((async()=>{await i()}),"success","Logrado","Se ha creado la regla correctamente")}))}else(0,Pe.y)((()=>{}),"warning","Advertencia","Rellene todos los campos, se debe asignar al menos un grupo por cada tipo")},_=e=>{const t={codigo:e.item.codigo,cod_grupousuarios:e.item.cod_grupousuarios,cod_cuenta:A.Z.state.codcuenta,cod_cliente:A.Z.state.codclienteAdmin};(0,Pe.M)((async()=>{await p(t).then((()=>{(0,Pe.y)((async()=>{await i()}),"success","Logrado","Se ha eliminado la regla correctamente")})).catch((e=>{console.log(e),(0,Pe.y)((()=>{}),"error","Hubo un error","No se logro eliminar")}))}),"¿Estás seguro de eliminar esta regla?","Aceptar")},w=(e,t)=>e.filter((e=>!t.some((t=>t.nombre===e.nombre)))),y=l=>{const a=o.value.map((e=>({nombre:e.nombre}))),i=e.value.map((e=>({nombre:e.nombre}))),r=t.value.map((e=>({nombre:e.nombre}))),u=f(o,l.item.cod_grupotiposdeventos),d=f(e,l.item.cod_grupounidades),c=f(t,l.item.cod_grupousuarios),p=w(a,u),m=w(i,d),v=w(r,c);n.value={...l,editAssignedGroupEvents:u,editAssignedGroupUnits:d,editAssignedGroupUsers:c,editAvailableGroupEvents:p,editAvailableGroupUnits:m,editAvailableGroupUsers:v},s.value=!0},x=l=>{const{regla:a,cod_grupotiposdeventos:n,cod_grupounidades:s,cod_grupousuarios:u}=l;if(""!==a&&n.length>0&&s.length>0&&u.length>0){const a=r(o,n),d=r(e,s),p=r(t,u),m={...l,cod_grupotiposdeventos:a,cod_grupounidades:d,cod_grupousuarios:p};c(m).then((()=>{(0,Pe.y)((async()=>{await i()}),"success","Logrado","Se ha editado la regla correctamente")})).catch((e=>{console.log(e),(0,Pe.y)((()=>{}),"error","Hubo un error","No se logro editar la regla")}))}else(0,Pe.y)((()=>{}),"warning","Advertencia","Rellene todos los campos, se debe asignar al menos un grupo por cada tipo")};return{dataGroupUnits:e,dataGroupUsers:t,dataGroupEvents:o,listRulesData:a,editDialog:s,editItem:n,onUpdateItem:x,onDeleteItem:_,onCreateItem:b,onEditItem:y}}};const Ze=(0,O.Z)(Te,[["render",s]]);var Me=Ze},3446:function(e,t,o){o.d(t,{M:function(){return y}});o(560);var l=o(3396),a=o(4108),n=o(4580),s=o(6191),i=o(2370),r=o(9166),u=o(6107),d=o(2465),c=o(1970),p=o(1136),m=o(4231),v=o(1138),g=o(4870),f=o(3766),b=o(1107),_=o(9888);const w=(0,f.U)({title:String,text:String,bgColor:String,...(0,r.l)(),...(0,d.c)(),...(0,c.YQ)(),...(0,p.H)(),...(0,m.I)(),...(0,v.Q)(),...(0,s.w)()},"VExpansionPanel"),y=(0,b.ev)()({name:"VExpansionPanel",props:w(),emits:{"group:selected":e=>!0},setup(e,t){let{slots:o}=t;const r=(0,c.Yt)(e,a.jS),{backgroundColorClasses:p,backgroundColorStyles:v}=(0,i.Y5)(e,"bgColor"),{elevationClasses:f}=(0,d.Y)(e),{roundedClasses:b}=(0,m.b)(e),w=(0,l.Fl)((()=>r?.disabled.value||e.disabled)),y=(0,l.Fl)((()=>r.group.items.value.reduce(((e,t,o)=>(r.group.selected.value.includes(t.id)&&e.push(o),e)),[]))),x=(0,l.Fl)((()=>{const e=r.group.items.value.findIndex((e=>e.id===r.id));return!r.isSelected.value&&y.value.some((t=>t-e===1))})),G=(0,l.Fl)((()=>{const e=r.group.items.value.findIndex((e=>e.id===r.id));return!r.isSelected.value&&y.value.some((t=>t-e===-1))}));return(0,l.JJ)(a.jS,r),(0,u.AF)({VExpansionPanelText:{eager:(0,g.Vh)(e,"eager")}}),(0,_.L)((()=>{const t=!(!o.text&&!e.text),a=!(!o.title&&!e.title);return(0,l.Wm)(e.tag,{class:["v-expansion-panel",{"v-expansion-panel--active":r.isSelected.value,"v-expansion-panel--before-active":x.value,"v-expansion-panel--after-active":G.value,"v-expansion-panel--disabled":w.value},b.value,p.value,e.class],style:[v.value,e.style]},{default:()=>[(0,l.Wm)("div",{class:["v-expansion-panel__shadow",...f.value]},null),a&&(0,l.Wm)(s.V,{key:"title",collapseIcon:e.collapseIcon,color:e.color,expandIcon:e.expandIcon,hideActions:e.hideActions,ripple:e.ripple},{default:()=>[o.title?o.title():e.title]}),t&&(0,l.Wm)(n.H,{key:"text"},{default:()=>[o.text?o.text():e.text]}),o.default?.()]})})),{}}})},4580:function(e,t,o){o.d(t,{H:function(){return m}});var l=o(3396),a=o(9242),n=o(4108),s=o(8952),i=o(9166),r=o(1136),u=o(3766),d=o(1107),c=o(9888);const p=(0,u.U)({...(0,i.l)(),...(0,r.H)()},"VExpansionPanelText"),m=(0,d.ev)()({name:"VExpansionPanelText",props:p(),setup(e,t){let{slots:o}=t;const i=(0,l.f3)(n.jS);if(!i)throw new Error("[Vuetify] v-expansion-panel-text needs to be placed inside v-expansion-panel");const{hasContent:u,onAfterLeave:d}=(0,r.l)(e,i.isSelected);return(0,c.L)((()=>(0,l.Wm)(s.Fx,{onAfterLeave:d},{default:()=>[(0,l.wy)((0,l.Wm)("div",{class:["v-expansion-panel-text",e.class],style:e.style},[o.default&&u.value&&(0,l.Wm)("div",{class:"v-expansion-panel-text__wrapper"},[o.default?.()])]),[[a.F8,i.isSelected.value]])]}))),{}}})},6191:function(e,t,o){o.d(t,{V:function(){return v},w:function(){return m}});var l=o(3396),a=o(4108),n=o(3289),s=o(2370),i=o(9166),r=o(4960),u=o(3824),d=o(3766),c=o(1107),p=o(9888);const m=(0,d.U)({color:String,expandIcon:{type:r.lE,default:"$expand"},collapseIcon:{type:r.lE,default:"$collapse"},hideActions:Boolean,ripple:{type:[Boolean,Object],default:!1},readonly:Boolean,...(0,i.l)()},"VExpansionPanelTitle"),v=(0,c.ev)()({name:"VExpansionPanelTitle",directives:{Ripple:u.H},props:m(),setup(e,t){let{slots:o}=t;const i=(0,l.f3)(a.jS);if(!i)throw new Error("[Vuetify] v-expansion-panel-title needs to be placed inside v-expansion-panel");const{backgroundColorClasses:r,backgroundColorStyles:u}=(0,s.Y5)(e,"color"),d=(0,l.Fl)((()=>({collapseIcon:e.collapseIcon,disabled:i.disabled.value,expanded:i.isSelected.value,expandIcon:e.expandIcon,readonly:e.readonly})));return(0,p.L)((()=>(0,l.wy)((0,l.Wm)("button",{class:["v-expansion-panel-title",{"v-expansion-panel-title--active":i.isSelected.value},r.value,e.class],style:[u.value,e.style],type:"button",tabindex:i.disabled.value?-1:void 0,disabled:i.disabled.value,"aria-expanded":i.isSelected.value,onClick:e.readonly?void 0:i.toggle},[(0,l.Wm)("span",{class:"v-expansion-panel-title__overlay"},null),o.default?.(d.value),!e.hideActions&&(0,l.Wm)("span",{class:"v-expansion-panel-title__icon"},[o.actions?o.actions(d.value):(0,l.Wm)(n.t,{icon:i.isSelected.value?e.collapseIcon:e.expandIcon},null)])]),[[(0,l.Q2)("ripple"),e.ripple]]))),{}}})},4108:function(e,t,o){o.d(t,{jS:function(){return m},Vc:function(){return f}});var l=o(3396),a=o(9166),n=o(6107),s=o(1970),i=o(1138),r=o(5935),u=o(4870),d=o(3766),c=o(1107),p=o(9888);const m=Symbol.for("vuetify:v-expansion-panel"),v=["default","accordion","inset","popout"],g=(0,d.U)({color:String,variant:{type:String,default:"default",validator:e=>v.includes(e)},readonly:Boolean,...(0,a.l)(),...(0,s.k4)(),...(0,i.Q)(),...(0,r.x$)()},"VExpansionPanels"),f=(0,c.ev)()({name:"VExpansionPanels",props:g(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:o}=t;(0,s._v)(e,m);const{themeClasses:a}=(0,r.ER)(e),i=(0,l.Fl)((()=>e.variant&&`v-expansion-panels--variant-${e.variant}`));return(0,n.AF)({VExpansionPanel:{color:(0,u.Vh)(e,"color")},VExpansionPanelTitle:{readonly:(0,u.Vh)(e,"readonly")}}),(0,p.L)((()=>(0,l.Wm)(e.tag,{class:["v-expansion-panels",a.value,i.value,e.class],style:e.style},o))),{}}})},8521:function(e,t,o){o.d(t,{D:function(){return b}});o(560),o(8099);var l=o(9166),a=o(8157),n=o(1138),s=o(7139),i=o(3396),r=o(3766),u=o(1107);const d=(()=>a.AV.reduce(((e,t)=>(e[t]={type:[Boolean,String,Number],default:!1},e)),{}))(),c=(()=>a.AV.reduce(((e,t)=>{const o="offset"+(0,s.kC)(t);return e[o]={type:[String,Number],default:null},e}),{}))(),p=(()=>a.AV.reduce(((e,t)=>{const o="order"+(0,s.kC)(t);return e[o]={type:[String,Number],default:null},e}),{}))(),m={col:Object.keys(d),offset:Object.keys(c),order:Object.keys(p)};function v(e,t,o){let l=e;if(null!=o&&!1!==o){if(t){const o=t.replace(e,"");l+=`-${o}`}return"col"===e&&(l="v-"+l),"col"!==e||""!==o&&!0!==o?(l+=`-${o}`,l.toLowerCase()):l.toLowerCase()}}const g=["auto","start","end","center","baseline","stretch"],f=(0,r.U)({cols:{type:[Boolean,String,Number],default:!1},...d,offset:{type:[String,Number],default:null},...c,order:{type:[String,Number],default:null},...p,alignSelf:{type:String,default:null,validator:e=>g.includes(e)},...(0,l.l)(),...(0,n.Q)()},"VCol"),b=(0,u.ev)()({name:"VCol",props:f(),setup(e,t){let{slots:o}=t;const l=(0,i.Fl)((()=>{const t=[];let o;for(o in m)m[o].forEach((l=>{const a=e[l],n=v(o,l,a);n&&t.push(n)}));const l=t.some((e=>e.startsWith("v-col-")));return t.push({"v-col":!l||!e.cols,[`v-col-${e.cols}`]:e.cols,[`offset-${e.offset}`]:e.offset,[`order-${e.order}`]:e.order,[`align-self-${e.alignSelf}`]:e.alignSelf}),t}));return()=>(0,i.h)(e.tag,{class:[l.value,e.class],style:e.style},o.default?.())}})},9234:function(e,t,o){o.d(t,{C:function(){return a}});var l=o(1114);const a=(0,l.J)("v-spacer","div","VSpacer")},1328:function(e,t,o){o.d(t,{i:function(){return W}});var l=o(3396),a=o(9166),n=o(1138),s=o(3766),i=o(1107),r=o(9888);const u=(0,s.U)({text:String,...(0,a.l)(),...(0,n.Q)()},"VToolbarTitle"),d=(0,i.ev)()({name:"VToolbarTitle",props:u(),setup(e,t){let{slots:o}=t;return(0,r.L)((()=>{const t=!!(o.default||o.text||e.text);return(0,l.Wm)(e.tag,{class:["v-toolbar-title",e.class],style:e.style},{default:()=>[t&&(0,l.Wm)("div",{class:"v-toolbar-title__placeholder"},[o.text?o.text():e.text,o.default?.()])]})})),{}}});var c=o(8952),p=o(836),m=o(8694),v=o(2718),g=o(2370),f=o(6107),b=o(2465),_=o(1629),w=o(4231),y=o(5935),x=o(4870),G=o(131);const h=[null,"prominent","default","comfortable","compact"],U=(0,s.U)({absolute:Boolean,collapse:Boolean,color:String,density:{type:String,default:"default",validator:e=>h.includes(e)},extended:Boolean,extensionHeight:{type:[Number,String],default:48},flat:Boolean,floating:Boolean,height:{type:[Number,String],default:64},image:String,title:String,...(0,v.m)(),...(0,a.l)(),...(0,b.c)(),...(0,w.I)(),...(0,n.Q)({tag:"header"}),...(0,y.x$)()},"VToolbar"),W=(0,i.ev)()({name:"VToolbar",props:U(),setup(e,t){let{slots:o}=t;const{backgroundColorClasses:a,backgroundColorStyles:n}=(0,g.Y5)((0,x.Vh)(e,"color")),{borderClasses:s}=(0,v.P)(e),{elevationClasses:i}=(0,b.Y)(e),{roundedClasses:u}=(0,w.b)(e),{themeClasses:h}=(0,y.ER)(e),{rtlClasses:U}=(0,_.Vw)(),W=(0,x.XI)(!(!e.extended&&!o.extension?.())),k=(0,l.Fl)((()=>parseInt(Number(e.height)+("prominent"===e.density?Number(e.height):0)-("comfortable"===e.density?8:0)-("compact"===e.density?16:0),10))),C=(0,l.Fl)((()=>W.value?parseInt(Number(e.extensionHeight)+("prominent"===e.density?Number(e.extensionHeight):0)-("comfortable"===e.density?4:0)-("compact"===e.density?8:0),10):0));return(0,f.AF)({VBtn:{variant:"text"}}),(0,r.L)((()=>{const t=!(!e.title&&!o.title),r=!(!o.image&&!e.image),v=o.extension?.();return W.value=!(!e.extended&&!v),(0,l.Wm)(e.tag,{class:["v-toolbar",{"v-toolbar--absolute":e.absolute,"v-toolbar--collapse":e.collapse,"v-toolbar--flat":e.flat,"v-toolbar--floating":e.floating,[`v-toolbar--density-${e.density}`]:!0},a.value,s.value,i.value,u.value,h.value,U.value,e.class],style:[n.value,e.style]},{default:()=>[r&&(0,l.Wm)("div",{key:"image",class:"v-toolbar__image"},[o.image?(0,l.Wm)(p.z,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{cover:!0,src:e.image}}},o.image):(0,l.Wm)(m.f,{key:"image-img",cover:!0,src:e.image},null)]),(0,l.Wm)(p.z,{defaults:{VTabs:{height:(0,G.kb)(k.value)}}},{default:()=>[(0,l.Wm)("div",{class:"v-toolbar__content",style:{height:(0,G.kb)(k.value)}},[o.prepend&&(0,l.Wm)("div",{class:"v-toolbar__prepend"},[o.prepend?.()]),t&&(0,l.Wm)(d,{key:"title",text:e.title},{text:o.title}),o.default?.(),o.append&&(0,l.Wm)("div",{class:"v-toolbar__append"},[o.append?.()])])]}),(0,l.Wm)(p.z,{defaults:{VTabs:{height:(0,G.kb)(C.value)}}},{default:()=>[(0,l.Wm)(c.Fx,null,{default:()=>[W.value&&(0,l.Wm)("div",{class:"v-toolbar__extension",style:{height:(0,G.kb)(C.value)}},[v])]})]})]})})),{contentHeight:k,extensionHeight:C}}})},678:function(e,t,o){o.d(t,{N:function(){return g}});var l=o(3396),a=o(5164),n=o(3185),s=o(8717),i=o(5975),r=o(4870),u=o(3766),d=o(131),c=o(1107),p=o(7514),m=o(9888);const v=(0,u.U)({id:String,text:String,...(0,d.CE)((0,a.B)({closeOnBack:!1,location:"end",locationStrategy:"connected",eager:!0,minWidth:0,offset:10,openOnClick:!1,openOnHover:!0,origin:"auto",scrim:!1,scrollStrategy:"reposition",transition:!1}),["absolute","persistent"])},"VTooltip"),g=(0,c.ev)()({name:"VTooltip",props:v(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:o}=t;const u=(0,s.z)(e,"modelValue"),{scopeId:d}=(0,i.a)(),c=(0,p.sq)(),v=(0,l.Fl)((()=>e.id||`v-tooltip-${c}`)),g=(0,r.iH)(),f=(0,l.Fl)((()=>e.location.split(" ").length>1?e.location:e.location+" center")),b=(0,l.Fl)((()=>"auto"===e.origin||"overlap"===e.origin||e.origin.split(" ").length>1||e.location.split(" ").length>1?e.origin:e.origin+" center")),_=(0,l.Fl)((()=>e.transition?e.transition:u.value?"scale-transition":"fade-transition")),w=(0,l.Fl)((()=>(0,l.dG)({"aria-describedby":v.value},e.activatorProps)));return(0,m.L)((()=>{const[t]=a.y.filterProps(e);return(0,l.Wm)(a.y,(0,l.dG)({ref:g,class:["v-tooltip",e.class],style:e.style,id:v.value},t,{modelValue:u.value,"onUpdate:modelValue":e=>u.value=e,transition:_.value,absolute:!0,location:f.value,origin:b.value,persistent:!0,role:"tooltip",activatorProps:w.value,_disableGlobalStack:!0},d),{activator:o.activator,default:function(){for(var t=arguments.length,l=new Array(t),a=0;a<t;a++)l[a]=arguments[a];return o.default?.(...l)??e.text}})})),(0,n.F)({},g)}})}}]);
//# sourceMappingURL=895.9ce1d654.js.map