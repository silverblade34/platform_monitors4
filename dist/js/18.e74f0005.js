"use strict";(self["webpackChunkplatform_monitors4"]=self["webpackChunkplatform_monitors4"]||[]).push([[18],{3518:function(e,t,l){l.d(t,{bo:function(){return o},cD:function(){return d},di:function(){return i},md:function(){return c}});var a=l(1076);const n="http://67.205.164.216:3000/api/v1";function o(e,t){return a.Z.post(`${n}/allUnits`,{cod_cuenta:e,cod_cliente:t})}function i(e){return a.Z.post(`${n}/createUnits`,e)}function d(e){return a.Z.put(`${n}/editUnits`,e)}function c(e){return a.Z.post(`${n}/deleteUnits`,e)}},1018:function(e,t,l){l.r(t),l.d(t,{default:function(){return me}});var a=l(3396),n=l(7139),o=l(9242),i=l(7771),d=l(4108),c=l(3446),s=l(6191),u=l(4580),r=l(3289),m=l(678);const p={class:"flex justify-between w-full"},v=(0,a._)("div",null,[(0,a._)("h1",{class:"font-bold text-xl title_poppins pb-5"},"Grupo de unidades")],-1),f={class:"w-full rounded-lg bg-white grid grid-cols-2 gap-3 p-4 shadow-md"},g={class:"p-3 border-2 border-blue-400 rounded-lg mt-3 min-h-[5rem]"},w={class:"mt-3"},b={class:"flex gap-2"},_={class:"p-3 rounded-lg border min-h-[4rem]"};function k(e,t,l,k,I,h){const W=(0,a.up)("CreateGroupUnitsVue"),A=(0,a.up)("EditGroupUnitsVue");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",null,[(0,a._)("div",p,[v,(0,a.Wm)(W,{onCreateItem:k.onCreateItem},null,8,["onCreateItem"])]),(0,a._)("div",f,[(0,a._)("div",null,[(0,a.Wm)(i.w,{color:"#3b82f6",theme:"dark",icon:"mdi-car",density:"compact",border:""},{default:(0,a.w5)((()=>[(0,a.Uk)(" Lista de unidades ")])),_:1}),(0,a._)("div",g,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(k.dataUnits,(e=>((0,a.wg)(),(0,a.j4)(i.w,{color:"#bfdbfe",theme:"dark",icon:"mdi-truck",density:"compact",class:"my-1",key:e.placa},{default:(0,a.w5)((()=>[(0,a.Uk)((0,n.zw)(e.placa),1)])),_:2},1024)))),128))])]),(0,a._)("div",null,[(0,a.Wm)(i.w,{color:"#3b82f6",theme:"dark",icon:"mdi-car-multiple",density:"compact",border:""},{default:(0,a.w5)((()=>[(0,a.Uk)(" Grupos de unidades ")])),_:1}),(0,a._)("div",w,[(0,a.Wm)(d.Vc,{multiple:""},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(k.dataGroupUnits,(e=>((0,a.wg)(),(0,a.j4)(c.M,{key:e.codigo},{default:(0,a.w5)((()=>[(0,a.Wm)(s.V,{color:"blue-grey-lighten-5"},{default:(0,a.w5)((()=>[(0,a._)("div",b,[(0,a._)("span",{onClick:t[0]||(t[0]=(0,o.iM)((()=>{}),["stop"]))},[(0,a.Wm)(r.t,{color:"green",size:"small",onClick:t=>k.editGroup(e)},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-square-edit-outline")])),_:2},1032,["onClick"]),(0,a.Wm)(m.N,{activator:"parent",location:"top"},{default:(0,a.w5)((()=>[(0,a.Uk)("Editar")])),_:1})]),(0,a._)("span",{onClick:t[1]||(t[1]=(0,o.iM)((()=>{}),["stop"]))},[(0,a.Wm)(r.t,{color:"red",size:"small",onClick:t=>k.deleteGroup(e.codigo)},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-delete-empty")])),_:2},1032,["onClick"]),(0,a.Wm)(m.N,{activator:"parent",location:"top"},{default:(0,a.w5)((()=>[(0,a.Uk)("Eliminar")])),_:1})]),(0,a._)("span",null,(0,n.zw)(e.nombre),1)])])),_:2},1024),(0,a.Wm)(u.H,null,{default:(0,a.w5)((()=>[(0,a._)("div",_,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.unidades,(e=>((0,a.wg)(),(0,a.j4)(i.w,{color:"#bfdbfe",theme:"dark",icon:"mdi-truck",density:"compact",key:e,class:"my-1"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,n.zw)(e),1)])),_:2},1024)))),128))])])),_:2},1024)])),_:2},1024)))),128))])),_:1})])])])]),(0,a.Wm)(A,{itemEdit:k.editItem,openModal:k.editDialog,onCancelItem:t[2]||(t[2]=e=>k.editDialog=!1),onEditItem:k.onUpdateItem},null,8,["itemEdit","openModal","onEditItem"])],64)}var I=l(3518),h=l(1076);const W="http://67.205.164.216:3000/api/v1";function A(e,t){return h.Z.post(`${W}/allGroupsUnits`,{cod_cuenta:e,cod_cliente:t})}function U(e){return h.Z.post(`${W}/createGroupUnits`,e)}function S(e){return h.Z.post(`${W}/deleteGroupUnits`,e)}function C(e){return h.Z.post(`${W}/editGroupsUnits`,e)}var y=l(7312),G=l(5039),H=l(1888),Z=l(1334),x=l(3601),D=l(8521),M=l(9234),V=l(165),T=l(1328);const E=(0,a._)("span",{class:"px-4 w-full text-center text-blue-400 font-bold title_views"},"Crear grupo de unidades",-1),N={class:"w-full block lg:flex gap-1 items-center"},L={class:"w-full"},z={class:"flex justify-center lg:block"},j={class:"my-1"},Y={class:"my-1"},O={class:"w-full"};function $(e,t,l,n,i,d){const c=(0,a.up)("SelectItemsAndMoveVue");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(y.T,{size:"small",color:"blue",onClick:t[0]||(t[0]=e=>n.dialog=!0)},{default:(0,a.w5)((()=>[(0,a.Wm)(r.t,{icon:"mdi-plus"}),(0,a.Uk)(" Crear Nuevo")])),_:1}),(0,a.Wm)(x.B,{modelValue:n.dialog,"onUpdate:modelValue":t[2]||(t[2]=e=>n.dialog=e),width:"600","onClick:outside":n.cancelItem},{default:(0,a.w5)((()=>[(0,a.Wm)(G._,null,{default:(0,a.w5)((()=>[(0,a.Wm)(T.i,null,{default:(0,a.w5)((()=>[E])),_:1}),(0,a.Wm)(H.Z,null,{default:(0,a.w5)((()=>[(0,a.Wm)(D.D,{cols:"12"},{default:(0,a.w5)((()=>[(0,a.Wm)(V.h,{variant:"outlined",label:"Nombre","prepend-inner-icon":"mdi-form-textbox",color:"indigo",modelValue:n.name,"onUpdate:modelValue":t[1]||(t[1]=e=>n.name=e)},null,8,["modelValue"]),(0,a._)("div",N,[(0,a._)("div",L,[(0,a.Wm)(y.T,{density:"compact",class:"w-full mb-2 text-none",color:"blue-lighten-1",variant:"tonal"},{default:(0,a.w5)((()=>[(0,a.Uk)(" UNIDADES DISPONIBLES ")])),_:1}),(0,a.Wm)(c,{listGroups:n.itemsAvailable,onListSeleccionados:n.emitSelectedItemsAvailable,nameGrupo:"Obras libres"},null,8,["listGroups","onListSeleccionados"])]),(0,a._)("div",z,[(0,a._)("div",j,[(0,a.Wm)(y.T,{icon:n.isMobile?"mdi-arrow-down":"mdi-arrow-right",variant:"tonal",size:"small",color:"indigo",onClick:(0,o.iM)(n.moveSelectedItemsToAssigned,["prevent"])},null,8,["icon","onClick"]),(0,a.Wm)(m.N,{activator:"parent",location:"top"},{default:(0,a.w5)((()=>[(0,a.Uk)("Agregar")])),_:1})]),(0,a._)("div",Y,[(0,a.Wm)(y.T,{icon:n.isMobile?"mdi-arrow-up":"mdi-arrow-left",variant:"tonal",size:"small",color:"indigo",onClick:(0,o.iM)(n.moveSelectedItemsToAvailable,["prevent"])},null,8,["icon","onClick"]),(0,a.Wm)(m.N,{activator:"parent",location:"top"},{default:(0,a.w5)((()=>[(0,a.Uk)("Quitar")])),_:1})])]),(0,a._)("div",O,[(0,a.Wm)(y.T,{density:"compact",class:"w-full mb-2 text-none",color:"blue-lighten-1",variant:"tonal"},{default:(0,a.w5)((()=>[(0,a.Uk)(" UNIDADES ASIGNADAS ")])),_:1}),(0,a.Wm)(c,{listGroups:n.itemsAssigned,onListSeleccionados:n.emitSelectedItemsAssigned,nameGrupo:"Obras asignadas"},null,8,["listGroups","onListSeleccionados"])])])])),_:1})])),_:1}),(0,a.Wm)(Z.h,null,{default:(0,a.w5)((()=>[(0,a.Wm)(M.C),(0,a.Wm)(y.T,{color:"blue-grey-lighten-2",variant:"tonal",onClick:n.cancelItem},{default:(0,a.w5)((()=>[(0,a.Uk)(" Cancelar ")])),_:1},8,["onClick"]),(0,a.Wm)(y.T,{color:"blue-lighten-1",variant:"tonal",onClick:n.createItem},{default:(0,a.w5)((()=>[(0,a.Uk)(" Aceptar ")])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue","onClick:outside"])],64)}l(560);var P=l(4239),B=l(4870),K=l(8609),Q={components:{SelectItemsAndMoveVue:K.Z},emits:["create-item"],setup(e,{emit:t}){const l=(0,B.iH)([]),n=(0,B.iH)(!1),o=(0,B.iH)(""),i=(0,B.iH)([]),d=(0,B.iH)([]),c=(0,B.iH)([]),s=(0,B.iH)([]),u=(0,B.iH)(!1);(0,a.YP)((()=>n.value),(e=>{1==e&&(r(),window.addEventListener("resize",r),(0,I.bo)(P.Z.state.codcuenta,P.Z.state.codcliente).then((e=>{l.value=e.data.data?e.data.data[0].unidades:[],s.value=l.value.map((e=>({name:e.placa})))})))}));const r=()=>{u.value=window.innerWidth<=500},m=()=>{t("create-item",{cod_cuenta:P.Z.state.codcuenta,cod_cliente:P.Z.state.codcliente,codigo:"",nombre:o.value,unidades:c.value.map((e=>e.name))}),p()},p=()=>{o.value="",c.value=[],n.value=!1},v=e=>{d.value=e},f=e=>{i.value=e},g=()=>{if(0!=i.value.length){const e=i.value.map((e=>({name:e})));c.value.push(...e),s.value=s.value.filter((t=>-1===e.findIndex((e=>e.name===t.name))))}},w=()=>{if(0!=d.value.length){const e=d.value.map((e=>({name:e})));s.value.push(...e),c.value=c.value.filter((t=>-1===e.findIndex((e=>e.name===t.name))))}};return{dialog:n,name:o,isMobile:u,createItem:m,cancelItem:p,selectedItemsAvailable:i,selectedItemsAssigned:d,itemsAssigned:c,itemsAvailable:s,emitSelectedItemsAssigned:v,emitSelectedItemsAvailable:f,moveSelectedItemsToAssigned:g,moveSelectedItemsToAvailable:w}}},q=l(89);const F=(0,q.Z)(Q,[["render",$]]);var J=F;const R=(0,a._)("span",{class:"px-4 w-full text-center text-blue-400 font-bold title_views"},"Editar grupo de unidades",-1),X={class:"w-full block lg:flex gap-1 items-center"},ee={class:"w-full"},te={class:"flex justify-center lg:block"},le={class:"my-1"},ae={class:"my-1"},ne={class:"w-full"};function oe(e,t,l,n,i,d){const c=(0,a.up)("SelectItemsAndMoveVue");return(0,a.wg)(),(0,a.j4)(x.B,{modelValue:n.dialog,"onUpdate:modelValue":t[1]||(t[1]=e=>n.dialog=e),width:"600","onClick:outside":n.cancelItem},{default:(0,a.w5)((()=>[(0,a.Wm)(G._,null,{default:(0,a.w5)((()=>[(0,a.Wm)(T.i,null,{default:(0,a.w5)((()=>[R])),_:1}),(0,a.Wm)(H.Z,null,{default:(0,a.w5)((()=>[(0,a.Wm)(D.D,{cols:"12"},{default:(0,a.w5)((()=>[(0,a.Wm)(V.h,{variant:"outlined",label:"Nombre","prepend-inner-icon":"mdi-form-textbox",color:"indigo",modelValue:n.name,"onUpdate:modelValue":t[0]||(t[0]=e=>n.name=e)},null,8,["modelValue"]),(0,a._)("div",X,[(0,a._)("div",ee,[(0,a.Wm)(y.T,{density:"compact",class:"w-full mb-2 text-none",color:"blue-lighten-1",variant:"tonal"},{default:(0,a.w5)((()=>[(0,a.Uk)(" UNIDADES DISPONIBLES ")])),_:1}),(0,a.Wm)(c,{listGroups:n.itemsAvailable,onListSeleccionados:n.emitSelectedItemsAvailable,nameGrupo:"Obras libres"},null,8,["listGroups","onListSeleccionados"])]),(0,a._)("div",te,[(0,a._)("div",le,[(0,a.Wm)(y.T,{icon:n.isMobile?"mdi-arrow-down":"mdi-arrow-right",variant:"tonal",size:"small",color:"indigo",onClick:(0,o.iM)(n.moveSelectedItemsToAssigned,["prevent"])},null,8,["icon","onClick"]),(0,a.Wm)(m.N,{activator:"parent",location:"top"},{default:(0,a.w5)((()=>[(0,a.Uk)("Agregar")])),_:1})]),(0,a._)("div",ae,[(0,a.Wm)(y.T,{icon:n.isMobile?"mdi-arrow-up":"mdi-arrow-left",variant:"tonal",size:"small",color:"indigo",onClick:(0,o.iM)(n.moveSelectedItemsToAvailable,["prevent"])},null,8,["icon","onClick"]),(0,a.Wm)(m.N,{activator:"parent",location:"top"},{default:(0,a.w5)((()=>[(0,a.Uk)("Quitar")])),_:1})])]),(0,a._)("div",ne,[(0,a.Wm)(y.T,{density:"compact",class:"w-full mb-2 text-none",color:"blue-lighten-1",variant:"tonal"},{default:(0,a.w5)((()=>[(0,a.Uk)(" UNIDADES ASIGNADAS ")])),_:1}),(0,a.Wm)(c,{listGroups:n.itemsAssigned,onListSeleccionados:n.emitSelectedItemsAssigned,nameGrupo:"Obras asignadas"},null,8,["listGroups","onListSeleccionados"])])])])),_:1})])),_:1}),(0,a.Wm)(Z.h,null,{default:(0,a.w5)((()=>[(0,a.Wm)(M.C),(0,a.Wm)(y.T,{color:"blue-grey-lighten-2",variant:"tonal",onClick:n.cancelItem},{default:(0,a.w5)((()=>[(0,a.Uk)(" Cancelar ")])),_:1},8,["onClick"]),(0,a.Wm)(y.T,{color:"blue-lighten-1",variant:"tonal",onClick:n.editItem},{default:(0,a.w5)((()=>[(0,a.Uk)(" Aceptar ")])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue","onClick:outside"])}var ie={components:{SelectItemsAndMoveVue:K.Z},props:{itemEdit:Object,openModal:Boolean},emits:["edit-item","cancel-item"],setup(e,{emit:t}){const l=(0,B.iH)([]),n=(0,B.iH)(!1),o=(0,B.iH)(""),i=(0,B.iH)(""),d=(0,B.iH)([]),c=(0,B.iH)([]),s=(0,B.iH)([]),u=(0,B.iH)([]),r=(0,B.iH)(!1);(0,a.YP)((()=>e.openModal),(e=>{n.value=e})),(0,a.YP)((()=>n.value),(e=>{1==e&&(m(),window.addEventListener("resize",m))})),(0,a.YP)((()=>e.itemEdit),(e=>{0!==Object.keys(e).length&&(i.value=e.codigo,o.value=e.nombre,s.value=e.unidades.map((e=>({name:e}))),(0,I.bo)(P.Z.state.codcuenta,P.Z.state.codcliente).then((t=>{l.value=t.data.data?t.data.data[0].unidades:[],u.value=l.value.filter((t=>!e.unidades.includes(t.placa))).map((e=>({name:e.placa})))})))}));const m=()=>{r.value=window.innerWidth<=500},p=()=>{t("edit-item",{cod_cuenta:P.Z.state.codcuenta,cod_cliente:P.Z.state.codcliente,codigo:i.value,nombre:o.value,unidades:s.value.map((e=>e.name))}),v()},v=()=>{t("cancel-item")},f=e=>{c.value=e},g=e=>{d.value=e},w=()=>{if(0!=d.value.length){const e=d.value.map((e=>({name:e})));s.value.push(...e),u.value=u.value.filter((t=>-1===e.findIndex((e=>e.name===t.name))))}},b=()=>{if(0!=c.value.length){const e=c.value.map((e=>({name:e})));u.value.push(...e),s.value=s.value.filter((t=>-1===e.findIndex((e=>e.name===t.name))))}};return{dialog:n,name:o,isMobile:r,editItem:p,cancelItem:v,selectedItemsAvailable:d,selectedItemsAssigned:c,itemsAssigned:s,itemsAvailable:u,emitSelectedItemsAssigned:f,emitSelectedItemsAvailable:g,moveSelectedItemsToAssigned:w,moveSelectedItemsToAvailable:b}}};const de=(0,q.Z)(ie,[["render",oe]]);var ce=de,se=l(3512),ue={components:{CreateGroupUnitsVue:J,EditGroupUnitsVue:ce},setup(){const e=(0,B.iH)([]),t=(0,B.iH)([]),l=(0,B.iH)({}),n=(0,B.iH)(!1);(0,a.bv)((async()=>{await o()}));const o=async()=>{const[l,a]=await Promise.all([(0,I.bo)(P.Z.state.codcuenta,P.Z.state.codcliente),A(P.Z.state.codcuenta,P.Z.state.codcliente)]);e.value=l.data.data?l.data.data[0].unidades:[],t.value=a.data.data?a.data.data[0].grupos_unidades:[]},i=e=>{""!=e.nombre?U(e).then((()=>{(0,se.y)((async()=>{await o()}),"success","Logrado","Se ha creado el grupo correctamente")})).catch((()=>{(0,se.y)((()=>{}),"error","Hubo un error","No se logro crear el grupo")})):(0,se.y)((()=>{}),"warning","Advertencia","Ingrese un nombre")},d=e=>{(0,se.M)((async()=>{const t={cod_cuenta:P.Z.state.codcuenta,cod_cliente:P.Z.state.codcliente,codigo:e};S(t).then((()=>{(0,se.y)((async()=>{await o()}),"success","Logrado","Se ha eliminado el grupo correctamente")})).catch((()=>{(0,se.y)((()=>{}),"error","Hubo un error","No se logro eliminar el grupo")}))}),"¿Estás seguro de eliminar este grupo?","Aceptar")},c=e=>{n.value=!0,l.value=e},s=e=>{C(e).then((()=>{(0,se.y)((async()=>{await o()}),"success","Logrado","Se ha editado el grupo correctamente")})).catch((()=>{(0,se.y)((()=>{}),"error","Hubo un error","No se logro editar el grupo")}))};return{editItem:l,editDialog:n,dataUnits:e,dataGroupUnits:t,editGroup:c,deleteGroup:d,onUpdateItem:s,onCreateItem:i}}};const re=(0,q.Z)(ue,[["render",k]]);var me=re}}]);
//# sourceMappingURL=18.e74f0005.js.map