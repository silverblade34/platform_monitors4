"use strict";(self["webpackChunkplatform_monitors4"]=self["webpackChunkplatform_monitors4"]||[]).push([[38],{9398:function(t,e,a){a.d(e,{AV:function(){return l},Ck:function(){return r},lA:function(){return i},pt:function(){return s}});var n=a(1076);const o="http://67.205.164.216:3000/api/v1";function r(t,e,a,r){return n.Z.post(`${o}/notifications/Account`,{cod_cuenta:t,cod_cliente:e,usuario:a,codigo:r})}function l(t,e,a){return n.Z.post(`${o}/massiveDiscard`,{ids:t,cod_cliente:a,cod_cuenta:e,descripcion_estado:"Descartado",estado:1})}function s(t){return n.Z.post(`${o}/addComment`,t)}function i(t){return n.Z.post(`${o}/allNotifications`,t)}},6365:function(t,e,a){a.d(e,{$d:function(){return r},DL:function(){return s},Ex:function(){return d},Kb:function(){return l},Zd:function(){return c},dN:function(){return i}});var n=a(1076);const o="http://67.205.164.216:3000/api/v1";function r(t){return n.Z.post(`${o}/listAccounts`,{cod_cuenta:t})}function l(t,e){return n.Z.post(`${o}/listClients`,{cod_cuenta:t,empresa:e})}function s(t){return n.Z.post(`${o}/createClient`,t)}function i(t){return n.Z.put(`${o}/editClient`,t)}function c(t){return n.Z.post(`${o}/deleteClient`,t)}function d(t){return n.Z.post(`${o}/repeatUser`,{usuario:t})}},3518:function(t,e,a){a.d(e,{bo:function(){return r},cD:function(){return s},di:function(){return l},md:function(){return i}});var n=a(1076);const o="http://67.205.164.216:3000/api/v1";function r(t,e){return n.Z.post(`${o}/allUnits`,{cod_cuenta:t,cod_cliente:e})}function l(t){return n.Z.post(`${o}/createUnits`,t)}function s(t){return n.Z.put(`${o}/editUnits`,t)}function i(t){return n.Z.post(`${o}/deleteUnits`,t)}},953:function(t,e,a){a.r(e),a.d(e,{default:function(){return wt}});var n=a(3396),o=a(5039),r=a(1888),l=a(3601),s=a(7325);const i={class:"mb-5"},c=(0,n._)("h1",{class:"font-bold text-xl title_poppins"},"Dashboard",-1),d={class:"grid grid-cols-4 gap-5 pt-5"},u={class:"col-span-2 max-h-[50rem]"},p={class:"col-span-1 max-h-[50rem]"},v={class:"col-span-1 max-h-[50rem]"};function m(t,e,a,m,f,g){const _=(0,n.up)("CardEventsVue"),w=(0,n.up)("EventNotificationVue"),h=(0,n.up)("VehicleNotificationVue"),b=(0,n.up)("OperatorNotificationVue");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("div",i,[c,(0,n._)("div",d,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(m.listCards,((t,e)=>((0,n.wg)(),(0,n.j4)(_,{BgCard:t.bgCard,Icon:t.icon,Amount:t.amount,Title:t.title,key:e},null,8,["BgCard","Icon","Amount","Title"])))),128)),(0,n._)("div",u,[(0,n.Wm)(w,{data:m.dataEvents},null,8,["data"])]),(0,n._)("div",p,[(0,n.Wm)(h,{data:m.dataVehicles},null,8,["data"])]),(0,n._)("div",v,[(0,n.Wm)(b,{data:m.dataOperators},null,8,["data"])])])]),(0,n.Wm)(l.B,{modelValue:m.dialogLoader,"onUpdate:modelValue":e[0]||(e[0]=t=>m.dialogLoader=t),scrim:!1,persistent:"",width:"auto"},{default:(0,n.w5)((()=>[(0,n.Wm)(o._,{color:"blue"},{default:(0,n.w5)((()=>[(0,n.Wm)(r.Z,null,{default:(0,n.w5)((()=>[(0,n.Uk)(" Construyendo "),(0,n.Wm)(s.K,{indeterminate:"",color:"white",class:"mb-0"})])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}var f=a(4870),g=a(7139),_=a(3289);const w={class:"bg-white rounded-lg p-5 grid grid-cols-4 shadow-md items-center"},h={class:"col-span-1 flex items-center justify-start"},b={class:"col-span-3 pl-3 text-gray-500"},y={class:"text-2xl font-bold pt-3"};function x(t,e,a,o,r,l){return(0,n.wg)(),(0,n.iD)("div",w,[(0,n._)("div",h,[(0,n._)("div",{class:(0,g.C_)(["rounded-lg text-white w-full flex justify-center h-[4rem] items-center",a.BgCard])},[(0,n.Wm)(_.t,{size:"large"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,g.zw)(a.Icon),1)])),_:1})],2)]),(0,n._)("div",b,[(0,n._)("p",null,(0,g.zw)(a.Title),1),(0,n._)("p",y,(0,g.zw)(a.Amount),1)])])}var Z={props:{BgCard:String,Icon:String,Amount:Number,Title:String}},C=a(89);const k=(0,C.Z)(Z,[["render",x]]);var D=k;const V=t=>((0,n.dD)("data-v-471b8928"),t=t(),(0,n.Cn)(),t),E={class:"shadow-md bg-white rounded-lg overflow-hidden"},A={class:"table-auto w-full"},$=V((()=>(0,n._)("thead",{class:"border-b"},[(0,n._)("tr",null,[(0,n._)("th",{class:"p-3 font-medium text-gray-600"},"Evento"),(0,n._)("th",{class:"p-3 font-medium text-gray-600"},"Cantidad"),(0,n._)("th",{class:"p-3 font-medium text-gray-600"},"Porcentaje")])],-1))),z={class:"text-center container_items text-gray-500"},U={class:"p-3"},j={class:"p-3"},H={class:"p-3"},W={class:"text-center text-xs"},B={class:"w-full bg-gray-300 rounded-full"};function N(t,e,a,o,r,l){return(0,n.wg)(),(0,n.iD)("div",E,[(0,n._)("table",A,[$,(0,n._)("tbody",z,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.data,(t=>((0,n.wg)(),(0,n.iD)("tr",{key:t.clave},[(0,n._)("td",U,(0,g.zw)(t.clave),1),(0,n._)("td",j,(0,g.zw)(t.valor),1),(0,n._)("td",H,[(0,n._)("p",W,(0,g.zw)(t.porcentaje)+"%",1),(0,n._)("div",B,[(0,n._)("div",{class:"bg-blue-400 text-xs font-medium text-white text-center p-1 leading-none rounded-l-lg",style:(0,g.j5)({width:t.porcentaje+"%"})},null,4)])])])))),128))])])])}var I={props:{data:Array}};const P=(0,C.Z)(I,[["render",N],["__scopeId","data-v-471b8928"]]);var S=P;const Y=t=>((0,n.dD)("data-v-269394c1"),t=t(),(0,n.Cn)(),t),L={class:"h-full shadow-md bg-white rounded-lg"},O=Y((()=>(0,n._)("p",{class:"border-b p-3 font-medium text-gray-600 text-center"}," Notificaciones por vehiculos ",-1))),F={class:"container_items container_scroll"},K={class:"px-2"},T={class:"w-full pl-2 text-gray-500"},G={class:"font-bold text-light-green-darken-1 text-xl pr-2"};function M(t,e,a,o,r,l){return(0,n.wg)(),(0,n.iD)("div",L,[O,(0,n._)("div",F,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.data,(t=>((0,n.wg)(),(0,n.iD)("div",{class:"p-4 flex items-center border-t",key:t.clave},[(0,n._)("span",K,[(0,n.Wm)(_.t,{size:"large",color:"cyan-lighten-1"},{default:(0,n.w5)((()=>[(0,n.Uk)("mdi-truck")])),_:1})]),(0,n._)("span",T,(0,g.zw)(t.clave),1),(0,n._)("span",G,(0,g.zw)(t.valor),1)])))),128))])])}var R={props:{data:Array}};const q=(0,C.Z)(R,[["render",M],["__scopeId","data-v-269394c1"]]);var J=q;const Q=t=>((0,n.dD)("data-v-4e7a0d46"),t=t(),(0,n.Cn)(),t),X={class:"h-full shadow-md bg-white rounded-lg"},tt=Q((()=>(0,n._)("p",{class:"border-b p-3 font-medium text-gray-600 text-center"}," Not. atendidas por operador ",-1))),et={class:"container_items container_scroll"},at={class:"px-3"},nt={class:"w-full pl-2 text-gray-500"},ot={class:"font-bold text-cyan-lighten-1 text-xl pr-3"};function rt(t,e,a,o,r,l){return(0,n.wg)(),(0,n.iD)("div",X,[tt,(0,n._)("div",et,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.data,(t=>((0,n.wg)(),(0,n.iD)("div",{class:"p-4 flex items-center border-t",key:t.clave},[(0,n._)("span",at,[(0,n.Wm)(_.t,{size:"large",color:"light-green-darken-1"},{default:(0,n.w5)((()=>[(0,n.Uk)("mdi-account-tie-voice-outline")])),_:1})]),(0,n._)("span",nt,(0,g.zw)(t.clave),1),(0,n._)("span",ot,(0,g.zw)(t.valor),1)])))),128))])])}var lt={props:{data:Array}};const st=(0,C.Z)(lt,[["render",rt],["__scopeId","data-v-4e7a0d46"]]);var it=st,ct=a(9398),dt=a(6365),ut=a(3518),pt=a(1076);const vt="http://67.205.164.216:3000/api/v1";function mt(t,e,a,n){return pt.Z.post(`${vt}/home/clientes`,{cod_cuenta:t,cod_cliente:e,usuario:a,cod_regla:n})}var ft=a(4239),gt={name:"HomeView",components:{CardEventsVue:D,EventNotificationVue:S,VehicleNotificationVue:J,OperatorNotificationVue:it},setup(){const t=(0,f.iH)([{bgCard:"bg-yellow-400",icon:"mdi-bell",amount:0,title:"Eventos sin atender",key:"unattended_events"},{bgCard:"bg-sky-400",icon:"mdi-account-tie-voice",amount:0,title:"Eventos en Gestión",key:"events_in_management"},{bgCard:"bg-lime-400",icon:"mdi-account-check",amount:0,title:"Eventos confirmados",key:"confirmed_events"},{bgCard:"bg-red-400",icon:"mdi-bell-remove",amount:0,title:"Eventos descartados",key:"discarded_events"}]),e=(0,f.iH)([]),a=(0,f.iH)([]),o=(0,f.iH)([]),r=(0,f.iH)(!1),l=async()=>{"All"==ft.Z.state.codclienteAdmin?await s():await i()},s=async()=>{t.value[0].title="Eventos del día",t.value[1].title="Clientes registrados",t.value[2].title="Operadores registrados",t.value[3].title="Unidades registradas",t.value[3].icon="mdi-truck";const[e,a,n]=await Promise.all([(0,ct.Ck)(ft.Z.state.codcuenta,ft.Z.state.codclienteAdmin,ft.Z.state.username,ft.Z.state.codregla),(0,dt.$d)(ft.Z.state.codcuenta),(0,ut.bo)(ft.Z.state.codcuenta,ft.Z.state.codclienteAdmin)]),o=e.data.data?e.data.data:[],r=a.data.data[0].clientes?a.data.data[0].clientes:[],l=r.filter((t=>"Administrador"==t.rol)),s=r.filter((t=>"Administrador"!=t.rol)),i=n.data.data?n.data.data:[],c=i.flatMap((t=>t.unidades.map((t=>t.cod_unidad))));t.value[0].amount=o.length,t.value[1].amount=l.length,t.value[2].amount=s.length,t.value[3].amount=c.length},i=async()=>{const[n,r]=await Promise.all([(0,ct.Ck)(ft.Z.state.codcuenta,ft.Z.state.codclienteAdmin,ft.Z.state.username,ft.Z.state.codregla),mt(ft.Z.state.codcuenta,ft.Z.state.codclienteAdmin,ft.Z.state.username,ft.Z.state.codregla)]),l=n.data.data;Promise.all([d(r.data.data_eventos),d(r.data.data_vehiculos),d(r.data.data_operadores)]).then((([t,n,r])=>{e.value=t,a.value=n,o.value=r})).catch((t=>{console.error("Error:",t)}));const s=[c(l,"Sin Atender"),c(l,"En Gestion"),c(l,"Confirmado"),c(l,"Descartado")],i=await Promise.all(s);t.value[0].amount=i[0].length,t.value[1].amount=i[1].length,t.value[2].amount=i[2].length,t.value[3].amount=i[3].length};(0,n.bv)((async()=>{r.value=!0,await l(),r.value=!1})),setInterval((()=>{l()}),15e3);const c=async(t,e)=>t?t.filter((t=>t.descripcion_estado===e)):[],d=async t=>{const e=Object.values(t).reduce(((t,e)=>t+e),0),a=Object.entries(t).map((([t,a])=>{const n=(a/e*100).toFixed(2);return{clave:t,valor:a,porcentaje:parseFloat(n)}}));return a.sort(((t,e)=>e.porcentaje-t.porcentaje)),a};return{listCards:t,dataEvents:e,dialogLoader:r,dataVehicles:a,dataOperators:o}}};const _t=(0,C.Z)(gt,[["render",m]]);var wt=_t},3601:function(t,e,a){a.d(e,{B:function(){return _}});var n=a(3396),o=a(2583),r=a(836),l=a(5164),s=a(3185),i=a(8717),c=a(5975),d=a(4870),u=a(3766),p=a(1107),v=a(131),m=a(2385),f=a(9888);const g=(0,u.U)({fullscreen:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,...(0,l.B)({origin:"center center",scrollStrategy:"block",transition:{component:o.v},zIndex:2400})},"VDialog"),_=(0,p.ev)()({name:"VDialog",props:g(),emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:a}=e;const o=(0,i.z)(t,"modelValue"),{scopeId:u}=(0,c.a)(),p=(0,d.iH)();function g(t){const e=t.relatedTarget,a=t.target;if(e!==a&&p.value?.contentEl&&p.value?.globalTop&&![document,p.value.contentEl].includes(a)&&!p.value.contentEl.contains(a)){const t=(0,v.ef)(p.value.contentEl);if(!t.length)return;const a=t[0],n=t[t.length-1];e===a?n.focus():a.focus()}}m.BR&&(0,n.YP)((()=>o.value&&t.retainFocus),(t=>{t?document.addEventListener("focusin",g):document.removeEventListener("focusin",g)}),{immediate:!0}),(0,n.YP)(o,(async t=>{await(0,n.Y3)(),t?p.value.contentEl?.focus({preventScroll:!0}):p.value.activatorEl?.focus({preventScroll:!0})}));const _=(0,n.Fl)((()=>(0,n.dG)({"aria-haspopup":"dialog","aria-expanded":String(o.value)},t.activatorProps)));return(0,f.L)((()=>{const[e]=l.y.filterProps(t);return(0,n.Wm)(l.y,(0,n.dG)({ref:p,class:["v-dialog",{"v-dialog--fullscreen":t.fullscreen,"v-dialog--scrollable":t.scrollable},t.class],style:t.style},e,{modelValue:o.value,"onUpdate:modelValue":t=>o.value=t,"aria-modal":"true",activatorProps:_.value,role:"dialog"},u),{activator:a.activator,default:function(){for(var t=arguments.length,e=new Array(t),o=0;o<t;o++)e[o]=arguments[o];return(0,n.Wm)(r.z,{root:"VDialog"},{default:()=>[a.default?.(...e)]})}})})),(0,s.F)({},p)}})}}]);
//# sourceMappingURL=38.ec039130.js.map